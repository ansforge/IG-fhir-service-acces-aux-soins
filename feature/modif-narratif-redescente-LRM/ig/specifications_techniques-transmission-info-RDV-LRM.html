<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE HTML>
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>Transmission des informations de rendez-vous aux LRM - Service d'Accès aux Soins v1.1.0</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="author" content="http://hl7.org/fhir"/>

    <link rel="stylesheet" href="fhir.css"/>

      <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="assets/css/bootstrap-fhir.css"/>

      <!-- Project extras -->
    <link rel="stylesheet" href="assets/css/project.css"/>
    <link rel="stylesheet" href="assets/css/pygments-manni.css"/>
    <link rel="stylesheet" href="assets/css/jquery-ui.css"/>
  	<link rel="stylesheet" href="assets/css/prism.css"/>
    <link rel="stylesheet" href="assets/css/style-ans.css"/>
    <link rel="stylesheet" href="assets/css/style-add-ans.css"/>
      <!-- Placeholder for child template CSS declarations -->

    <script src="fhir-table-scripts.js" type="text/javascript"> </script>

      <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
      <!-- [if lt IE 9]>
    <script src="assets/js/html5shiv.js"></script>
    <script src="assets/js/respond.min.js"></script>
    <![endif] -->

      <!-- Favicons -->
    <link sizes="144x144" rel="fhir-logo" href="assets/ico/icon-fhir-144.png"/>
    <link sizes="114x114" rel="fhir-logo" href="assets/ico/icon-fhir-114.png"/>
    <link sizes="72x72" rel="fhir-logo" href="assets/ico/icon-fhir-72.png"/>
    <link rel="fhir-logo" href="assets/ico/icon-fhir-57.png"/>
    <link rel="shortcut icon" href="assets/ico/favicon.png"/>
  </head>
  <body onload="document.body.style.opacity='1'">

	  <script src="assets/js/prism.js"></script>
    <script src="assets/js/mermaid.js" type="text/javascript"></script>
    <script src="assets/js/mermaid-init.js" type="text/javascript"></script>
    <style type="text/css">h2{--heading-prefix:"12"}
    h3,h4,h5,h6{--heading-prefix:"12"}</style>
    <div id="segment-header" class="segment">    <!-- segment-header -->
      <div class="container">    <!-- container -->
          <!-- Placeholder for child template header declarations -->
<div id="family-nav">
    <a id="hl7-search-lnk" href="http://hl7.org/fhir" data-no-external="true"><img src="assets/images/fhir-logo-www.png" alt="Visit the FHIR website" height="50"/> </a>
  </div>
  <div style="line-height: 50px; float: left; margin-top: 4px; margin-bottom: 8px; color: #808080; " id="ans-nav">
    <a id="hl7-logo" href="https://esante.gouv.fr/" data-no-external="true"><img src="assets/images/logo-ANS.svg" alt="ANS Logo" height="50"/></a>
    <a id="hl7-search-lnk" href="searchform.html" data-no-external="true"><img src="assets/images/search.png" alt="Search FHIR"/></a>
  </div>

  <div id="ig-search">
 </div>


        <div id="ig-status">
          <p><span style="font-size:12pt;font-weight:bold">Service d'Accès aux Soins</span>
            <br/>
            <span style="display:inline-block;">1.1.0 - ci-build



  <img src="assets/images/fra.svg" alt="France flag" title="France" height="16"/>


            </span>
          </p>
        </div>
      </div>   <!-- /container -->
    </div>    <!-- /segment-header -->

    <div id="segment-navbar" class="segment">    <!-- segment-navbar -->
      <div id="stripe"> </div>
      <div class="container">    <!-- container -->
          <!-- HEADER CONTENT -->

        <nav class="navbar navbar-inverse">
            <!-- status-bar -->
          <div class="container">
            <button data-target=".navbar-inverse-collapse" data-toggle="collapse" type="button" class="navbar-toggle">
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
            </button>
            <a href="http://hl7.org/fhir/R4/index.html" class="navbar-brand hidden">FHIR</a>
            <div class="nav-collapse collapse navbar-inverse-collapse">
                <!-- menu.xml -->

<ul class="nav navbar-nav">
  <li>
    <a href="index.html">Accueil</a>
  </li>
  <li>
    <a href="specifications_fonctionnelles.html">Spécif. fonctionnelles</a>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Spécif. techniques
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        ________ PS indiv. ________
      </li>
      <li>
        <a href="specifications_techniques-ps-recherche_creneaux.html">PS indiv. - Recherche des créneaux</a>
      </li>
      <li>
        <a href="specifications_techniques-ps-gestion_regulateur.html">PS indiv. - Gestion des comptes régulateurs</a>
      </li>
      <li>
        <a href="specifications_techniques-ps-gestion_rdv.html">PS indiv. - Gestion de rendez-vous</a>
      </li>
      <li>
        _________ CPTS _________
      </li>
      <li>
        <a href="specifications_techniques-cpts-recherche_creneaux.html">CPTS - Recherche des créneaux</a>
      </li>
      <li>
        <a href="specifications_techniques-cpts-gestion_regulateur.html">CPTS - Gestion des comptes régulateurs</a>
      </li>
      <li>
        <a href="specifications_techniques-cpts-gestion_rdv.html">CPTS - Gestion de rendez-vous</a>
      </li>
      <li>
        ________ SOS Médecins ________
      </li>
      <li>
        <a href="specifications_techniques-sos-recherche_creneaux.html">SOS Médecins - Recherche des créneaux</a>
      </li>
      <li>
        <a href="specifications_techniques-sos-gestion_regulateur.html">SOS Médecins - Gestion des comptes régulateurs</a>
      </li>
      <li>
        <a href="specifications_techniques-sos-gestion_rdv.html">SOS Médecins - Gestion de rendez-vous</a>
      </li>
      <li>
        ________ Fluidification parcours régulateur ________
      </li>
      <li>
        <a href="specifications_techniques-transmission-info-RDV-LRM.html">Transmission des informations de rendez-vous aux LRM</a>
      </li>
    </ul>
  </li>
  <li>
    <a href="ressources_casusage.html">Ressources par cas d'usage</a>
  </li>
  <li>
    <a href="artifacts.html">Ressources de conformité</a>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Autres ressources
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="securite.html">Sécurité</a>
      </li>
      <li>
        <a href="faq.html">FAQ</a>
      </li>
      <li>
        <a href="acronymes.html">Acronymes</a>
      </li>
      <li>
        <a href="annexes.html">Annexes</a>
      </li>
      <li>
        <a href="downloads.html">Téléchargements et usage</a>
      </li>
      <li>
        <a href="http://hl7.org/fhir/R4/index.html" target="_blank">Spécifications FHIR</a>
      </li>
      <li>
        <a href="https://esante.gouv.fr/" target="_blank">Site de l'ANS</a>
      </li>
    </ul>
  </li>
  <li>
    <a href="https://interop.esante.gouv.fr/ig/documentation/" target="_blank">Documentation</a>
  </li>
</ul>
            </div>    <!-- /.nav-collapse -->
          </div>    <!-- /.container -->
        </nav>    <!-- /.navbar -->
        <!-- /HEADER CONTENT -->
      </div>    <!-- /container -->
    </div>    <!-- /segment-navbar -->
      <!-- status-bar -->

    <div id="segment-breadcrumb" class="segment">    <!-- segment-breadcrumb -->
      <div class="container">    <!-- container -->
        <ul class="breadcrumb">
          <li><a href="toc.html"><b>Table of Contents</b></a></li><li><b>Transmission des informations de rendez-vous aux LRM</b></li>

          <span style="float:right;">

            <a href="specifications_techniques-sos-gestion_rdv.html">&lt;prev</a> | 

            <a href="#bottom">bottom</a>

          | <a href="ressources_casusage.html">next&gt;</a>

          </span>

        </ul>
      </div>    <!-- /container -->
    </div>    <!-- /segment-breadcrumb -->

    <a name="top"> </a>
    <div id="segment-content" class="segment">    <!-- segment-content -->
      <div class="container">    <!-- container -->
        <div class="row">
          <div class="inner-wrapper">

<style type="text/css">
h2:before{color:silver;counter-increment:section;content:var(--heading-prefix) " ";}
h3:before{color:silver;counter-increment:sub-section;content:var(--heading-prefix) "." counter(sub-section) " ";}
h4:before{color:silver;counter-increment:composite;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) " ";}
h5:before{color:silver;counter-increment:detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) " ";}
h6:before{color:silver;counter-increment:more-detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) "." counter(more-detail)" ";}
</style>
<div class="col-12">
    <!-- ReleaseHeader --><p id="publish-box">Service d'Accès aux Soins - Local Development build (v1.1.0) built by the FHIR (HL7&reg; FHIR&reg; Standard) Build Tools. See the <a href="https://interop.esante.gouv.fr/ig/fhir/sas/history.html">Directory of published versions</a></p>  <!-- EndReleaseHeader -->
  <h2>Transmission des informations de rendez-vous aux LRM</h2>
  












    <p>  <!-- white space is critical inside of capture --></p>
<div class="markdown-toc">
<ul id="markdown-toc">
  <li><a href="#structure-et-format-des-messages-transitant-via-le-hub-santé" id="markdown-toc-structure-et-format-des-messages-transitant-via-le-hub-santé">Structure et format des messages transitant via le Hub Santé</a></li>
  <li><a href="#détail-des-échanges-entre-la-plateforme-sas-et-le-hub-santé" id="markdown-toc-détail-des-échanges-entre-la-plateforme-sas-et-le-hub-santé">Détail des échanges entre la plateforme SAS et le Hub Santé</a></li>
  <li><a href="#echanges-entre-léditeur-lrm-et-le-hub-santé" id="markdown-toc-echanges-entre-léditeur-lrm-et-le-hub-santé">Echanges entre l'éditeur LRM et le Hub Santé</a></li>
  <li><a href="#données-transmises-au-lrm" id="markdown-toc-données-transmises-au-lrm">Données transmises au LRM</a></li>
  <li><a href="#message-de-modification-de-rdv" id="markdown-toc-message-de-modification-de-rdv">Message de modification de RDV</a></li>
  <li><a href="#message-dannulation-de-rdv" id="markdown-toc-message-dannulation-de-rdv">Message d'annulation de RDV</a></li>
  <li><a href="#détail-des-champs-transmis-et-nomenclatures" id="markdown-toc-détail-des-champs-transmis-et-nomenclatures">Détail des champs transmis et nomenclatures</a></li>
  <li><a href="#exemples-de-messages-complets-avec-entêtes-et-contenu" id="markdown-toc-exemples-de-messages-complets-avec-entêtes-et-contenu">Exemples de messages complets avec entêtes et contenu</a></li>
  <li><a href="#déclencheurs-et-règles-dintégration-attendues" id="markdown-toc-déclencheurs-et-règles-dintégration-attendues">Déclencheurs et règles d'intégration attendues</a></li>
</ul>

</div>
<p>Les échanges avec les éditeurs de LRM se font au travers d'une liaison avec le <a href="https://hub.esante.gouv.fr/">Hub Santé</a>.
La plateforme numérique du SAS, ainsi que les éditeurs de LRM sont raccordés au Hub.</p>

<p>Le schéma ci-dessous illustre l'échange de données entre la PTF SAS et les éditeurs de LRM</p>

<div style="width:100%;" align="center" class="figure">
    <p><svg xmlns="http://www.w3.org/2000/svg" contentStyleType="text/css" viewBox="0 0 1053 93" zoomAndPan="magnify" data-diagram-type="DESCRIPTION" preserveAspectRatio="none" width="1053px" xmlns:xlink="http://www.w3.org/1999/xlink" style="width:1053px;height:93px;background:#FFFFFF;" version="1.1" height="93px"><defs></defs><g>  <!-- entity R --><g data-entity="R" id="entity_R" data-uid="ent0002" class="entity" data-source-line="3"><ellipse cx="44.6504" cy="20.0659" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1"></ellipse><path d="M44.6504,28.0659 L44.6504,55.0659 M31.6504,36.0659 L57.6504,36.0659 M44.6504,55.0659 L31.6504,70.0659 M44.6504,55.0659 L57.6504,70.0659" style="stroke:#181818;stroke-width:0.5;" fill="none"></path><text lengthAdjust="spacing" x="6" font-size="14" textLength="77.3008" y="84.561" font-family="sans-serif" fill="#000000">Régulateur</text></g>  <!-- entity db --><g data-entity="db" id="entity_db" data-uid="ent0003" class="entity" data-source-line="4"><path d="M225,37.0659 C225,27.0659 267.4126,27.0659 267.4126,27.0659 C267.4126,27.0659 309.8252,27.0659 309.8252,37.0659 L309.8252,62.3628 C309.8252,72.3628 267.4126,72.3628 267.4126,72.3628 C267.4126,72.3628 225,72.3628 225,62.3628 L225,37.0659" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1"></path><path d="M225,37.0659 C225,47.0659 267.4126,47.0659 267.4126,47.0659 C267.4126,47.0659 309.8252,47.0659 309.8252,37.0659" style="stroke:#181818;stroke-width:0.5;" fill="none"></path><text lengthAdjust="spacing" x="235" font-size="14" textLength="64.8252" y="64.061" font-family="sans-serif" fill="#000000">Stockage</text></g>  <!-- entity PTF --><g data-entity="PTF" id="entity_PTF" data-uid="ent0004" class="entity" data-source-line="5"><rect rx="2.5" ry="2.5" width="128.3154" x="345.5" y="31.5659" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="36.2969"></rect><text lengthAdjust="spacing" x="355.5" font-size="14" textLength="108.3154" y="54.561" font-family="sans-serif" fill="#000000">Plateforme SAS</text></g>  <!-- entity Hub --><g data-entity="Hub" id="entity_Hub" data-uid="ent0005" class="entity" data-source-line="6"><path d="M694,36.5659 L777.1787,36.5659 C782.1787,36.5659 782.1787,49.7144 782.1787,49.7144 C782.1787,49.7144 782.1787,62.8628 777.1787,62.8628 L694,62.8628 C689,62.8628 689,49.7144 689,49.7144 C689,49.7144 689,36.5659 694,36.5659" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1"></path><path d="M777.1787,36.5659 C772.1787,36.5659 772.1787,49.7144 772.1787,49.7144 C772.1787,62.8628 777.1787,62.8628 777.1787,62.8628" style="stroke:#181818;stroke-width:0.5;" fill="none"></path><text lengthAdjust="spacing" x="694" font-size="14" textLength="73.1787" y="54.561" font-family="sans-serif" fill="#000000">Hub Santé</text></g>  <!-- entity LRM --><g data-entity="LRM" id="entity_LRM" data-uid="ent0006" class="entity" data-source-line="7"><rect rx="2.5" ry="2.5" width="49.6064" x="997.5" y="31.5659" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="36.2969"></rect><text lengthAdjust="spacing" x="1007.5" font-size="14" textLength="29.6064" y="54.561" font-family="sans-serif" fill="#000000">LRM</text></g>  <!-- link R to db --><g data-entity-2="db" data-entity-1="R" id="link_R_db" data-uid="lnk7" class="link" data-source-line="9"><path d="M83.09,49.5659 C122.61,49.5659 177.88,49.5659 218.82,49.5659" style="stroke:#181818;stroke-width:1;" id="R-to-db" fill="none"></path><polygon style="stroke:#181818;stroke-width:1;" fill="#181818" points="224.82,49.5659,215.82,45.5659,219.82,49.5659,215.82,53.5659,224.82,49.5659"></polygon><text lengthAdjust="spacing" x="101.5" font-size="13" textLength="100.8706" y="27.6328" font-family="sans-serif" fill="#000000">Enregistrement</text><text lengthAdjust="spacing" x="120.5112" font-size="13" textLength="71.1128" y="42.7656" font-family="sans-serif" fill="#000000">orientation</text></g>  <!-- link db to PTF --><g data-entity-2="PTF" data-entity-1="db" id="link_db_PTF" data-uid="lnk8" class="link" data-source-line="10"><path d="M310.21,49.5659 C321.85,49.5659 327.48,49.5659 339.12,49.5659" style="stroke:#181818;stroke-width:1;" id="db-to-PTF" fill="none"></path><polygon style="stroke:#181818;stroke-width:1;" fill="#181818" points="345.12,49.5659,336.12,45.5659,340.12,49.5659,336.12,53.5659,345.12,49.5659"></polygon></g>  <!-- link PTF to Hub --><g data-entity-2="Hub" data-entity-1="PTF" id="link_PTF_Hub" data-uid="lnk9" class="link" data-source-line="11"><path d="M473.52,49.5659 C536.75,49.5659 625.96,49.5659 682.51,49.5659" style="stroke:#181818;stroke-width:1;" id="PTF-to-Hub" fill="none"></path><polygon style="stroke:#181818;stroke-width:1;" fill="#181818" points="688.51,49.5659,679.51,45.5659,683.51,49.5659,679.51,53.5659,688.51,49.5659"></polygon><text lengthAdjust="spacing" x="491.75" font-size="13" textLength="179.1563" y="42.6328" font-family="sans-serif" fill="#000000">Transmission message json</text></g>  <!-- link Hub to PTF --><g data-entity-2="PTF" data-entity-1="Hub" id="link_Hub_PTF" data-uid="lnk13" class="link" data-source-line="15"><path d="M700.55,36.5059 C691.31,33.6359 681.27,31.0259 671.75,29.5659 C631.99,23.4759 530.68,24.7259 490.75,29.5659 C485.13,30.2459 485.2246,30.0661 479.4346,31.1661" style="stroke:#0000FF;stroke-width:1;" id="Hub-to-PTF" fill="none"></path><polygon style="stroke:#0000FF;stroke-width:1;" fill="#0000FF" points="473.54,32.2859,483.1284,34.5358,478.4521,31.3527,481.6353,26.6764,473.54,32.2859"></polygon><text lengthAdjust="spacing" x="568.25" font-size="13" textLength="26.4951" y="19.6328" font-family="sans-serif" fill="#0000FF">ACK</text></g>  <!-- link Hub to PTF --><g data-entity-2="PTF" data-entity-1="Hub" id="link_Hub_PTF" data-uid="lnk14" class="link" data-source-line="16"><path d="M688.86,58.5259 C664.24,62.7959 633.48,67.4459 605.75,69.5659 C561.53,72.9559 517.7597,68.712 479.4397,62.792" style="stroke:#FF0000;stroke-width:1;" id="Hub-to-PTF-1" fill="none"></path><polygon style="stroke:#FF0000;stroke-width:1;" fill="#FF0000" points="473.51,61.8759,481.7938,67.2031,478.4514,62.6393,483.0152,59.2969,473.51,61.8759"></polygon><text lengthAdjust="spacing" x="557.75" font-size="13" textLength="47.2583" y="65.6328" font-family="sans-serif" fill="#FF0000">Erreurs</text></g>  <!-- link Hub to LRM --><g data-entity-2="LRM" data-entity-1="Hub" id="link_Hub_LRM" data-uid="lnk10" class="link" data-source-line="12"><path d="M782.25,49.5659 C843.56,49.5659 942.98,49.5659 991.15,49.5659" style="stroke:#181818;stroke-width:1;" id="Hub-to-LRM" fill="none"></path><polygon style="stroke:#181818;stroke-width:1;" fill="#181818" points="997.15,49.5659,988.15,45.5659,992.15,49.5659,988.15,53.5659,997.15,49.5659"></polygon><text lengthAdjust="spacing" x="800.25" font-size="13" textLength="179.1563" y="42.6328" font-family="sans-serif" fill="#000000">Transmission message json</text></g>  <!-- link LRM to Hub --><g data-entity-2="Hub" data-entity-1="LRM" id="link_LRM_Hub" data-uid="lnk11" class="link" data-source-line="13"><path d="M997.23,35.4059 C991.79,32.9859 985.95,30.8459 980.25,29.5659 C941.01,20.7459 839.01,23.4759 799.25,29.5659 C789.73,31.0259 785.42,31.8562 776.18,34.7262" style="stroke:#0000FF;stroke-width:1;" id="LRM-to-Hub" fill="none"></path><polygon style="stroke:#0000FF;stroke-width:1;" fill="#0000FF" points="770.45,36.5059,780.2314,37.6563,775.225,35.0228,777.8584,30.0163,770.45,36.5059"></polygon><text lengthAdjust="spacing" x="876.75" font-size="13" textLength="26.4951" y="19.6328" font-family="sans-serif" fill="#0000FF">ACK</text></g>  <!-- link LRM to Hub --><g data-entity-2="Hub" data-entity-1="LRM" id="link_LRM_Hub" data-uid="lnk12" class="link" data-source-line="14"><path d="M997.31,55.5759 C975.49,60.4459 942.99,66.9359 914.25,69.5659 C869.32,73.6859 824.0563,67.8868 788.0163,61.0968" style="stroke:#FF0000;stroke-width:1;" id="LRM-to-Hub-1" fill="none"></path><polygon style="stroke:#FF0000;stroke-width:1;" fill="#FF0000" points="782.12,59.9859,790.2238,65.5831,787.0336,60.9116,791.705,57.7214,782.12,59.9859"></polygon><text lengthAdjust="spacing" x="866.25" font-size="13" textLength="47.2583" y="65.6328" font-family="sans-serif" fill="#FF0000">Erreurs</text></g></g></svg></p>
</div>

<p>Le protocole utilisé pour la connexion des applications (PTF SAS et éditeurs de LRM) avec le Hub est le <a href="https://fr.wikipedia.org/wiki/Advanced_Message_Queuing_Protocol">protocole AMQP</a>, en version 0-9-1.</p>

<p>Les messages seront transmis sous la forme d'un fichier json contenant les différentes données permettant aux LRM de traiter le message.</p>

<p>Les messages sont transmis avec un entête permettant au Hub de router le message vers le bon SAMU et la solution LRM associée au SAS de destination. Les règles de nommage et de routage associées ainsi que l’enveloppe EDXL-DE permettant de porter ces informations d’adressage dans les messages sont décrites ci-après.</p>

<p>Le mode de communication est basé sur un mode d'échange point à point (PTP) via des files de messages.</p>

<p>Chaque client (Plateforme numérique SAS et les solutions de LRM) dispose de 3 files d’écoute selon la typologie des messages reçus :</p>
<ul>
  <li>« message » pour les échanges fonctionnels</li>
  <li>« ack » pour les acquittements de réception finale</li>
  <li>« info » pour les messages généraux d’informations, alertes et erreurs</li>
</ul>

<p>La structuration du nom des files est {&#x1D456;&#x1D451;&#x1D452;&#x1D45B;&#x1D461;&#x1D456;&#x1D453;&#x1D456;&#x1D44E;&#x1D45B;&#x1D461;&#x1D436;&#x1D459;&#x1D456;&#x1D452;&#x1D45B;&#x1D461;}.{&#x1D461;&#x1D466;&#x1D45D;&#x1D45C;&#x1D459;&#x1D45C;&#x1D454;&#x1D456;&#x1D452;} donnant, par exemple, <em>fr.health.samu001.message</em></p>

<p>En l'occurrence, les LRM écouteront sur leur file « message » et la plateforme SAS écoutera sur les files "ack" et "info".</p>

<p>Le schéma ci-dessous détaille cette cinématique d'échange entre les différents acteurs</p>

<div style="width:100%;" align="center" class="figure">
    <p><svg xmlns="http://www.w3.org/2000/svg" contentStyleType="text/css" viewBox="0 0 570 470" zoomAndPan="magnify" data-diagram-type="SEQUENCE" preserveAspectRatio="none" width="570px" xmlns:xlink="http://www.w3.org/1999/xlink" style="width:570px;height:470px;background:#FFFFFF;" version="1.1" height="470px"><defs></defs><g><g><title>Client B</title><rect width="8" x="35.2925" y="52.5938" fill="#000000" fill-opacity="0.00000" height="410.8594"></rect><line y1="52.5938" x1="39" y2="463.4531" style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x2="39"></line></g><g><title>**Hub Santé**</title><rect width="8" x="249.0303" y="52.5938" fill="#000000" fill-opacity="0.00000" height="410.8594"></rect><line y1="52.5938" x1="252.8984" y2="463.4531" style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x2="252.8984"></line></g><g><title>Client A</title><rect width="8" x="520.4937" y="52.5938" fill="#000000" fill-opacity="0.00000" height="410.8594"></rect><line y1="52.5938" x1="523.8691" y2="463.4531" style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x2="523.8691"></line></g><g data-participant="LRM" class="participant participant-head"><rect rx="2.5" ry="2.5" width="68.585" x="5" y="5" style="stroke:#181818;stroke-width:0.5;" fill="#E2E2F0" height="46.5938"></rect><text lengthAdjust="spacing" x="12" font-size="14" textLength="54.585" y="24.9951" font-family="sans-serif" fill="#000000">Client B</text><text font-weight="bold" lengthAdjust="spacing" x="22.4761" font-size="14" textLength="33.6328" y="41.292" font-family="sans-serif" fill="#000000">LRM</text></g><g data-participant="Hub" class="participant participant-head"><rect rx="2.5" ry="2.5" width="96.2637" x="204.8984" y="5" style="stroke:#181818;stroke-width:0.5;" fill="#E2E2F0" height="46.5938"></rect><text font-weight="bold" lengthAdjust="spacing" x="211.8984" font-size="14" textLength="82.2637" y="24.9951" font-family="sans-serif" fill="#000000">Hub Santé</text><text lengthAdjust="spacing" x="250.8052" font-size="14" textLength="4.4502" y="41.292" font-family="sans-serif" fill="#000000">&nbsp;</text></g><g data-participant="PTF" class="participant participant-head"><rect rx="2.5" ry="2.5" width="79.249" x="484.8691" y="5" style="stroke:#181818;stroke-width:0.5;" fill="#E2E2F0" height="46.5938"></rect><text lengthAdjust="spacing" x="497.2148" font-size="14" textLength="54.5576" y="24.9951" font-family="sans-serif" fill="#000000">Client A</text><text font-weight="bold" lengthAdjust="spacing" x="491.8691" font-size="14" textLength="65.249" y="41.292" font-family="sans-serif" fill="#000000">PTF SAS</text></g><g data-participant-1="PTF" data-participant-2="Hub" class="message"><polygon style="stroke:#181818;stroke-width:1;" fill="#181818" points="264.0303,79.7266,254.0303,83.7266,264.0303,87.7266,260.0303,83.7266"></polygon><line y1="83.7266" x1="258.0303" y2="83.7266" style="stroke:#181818;stroke-width:1;" x2="523.4937"></line><text lengthAdjust="spacing" x="270.0303" font-size="13" textLength="212.2275" y="78.6606" font-family="sans-serif" fill="#000000">1. Envoi du message fonctionnel</text></g><g data-participant-1="Hub" data-participant-2="PTF" class="message"><polygon style="stroke:#181818;stroke-width:1;" fill="#181818" points="512.4937,108.8594,522.4937,112.8594,512.4937,116.8594,516.4937,112.8594"></polygon><line y1="112.8594" x1="253.0303" y2="112.8594" style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x2="518.4937"></line><text lengthAdjust="spacing" x="260.0303" font-size="13" textLength="173.8242" y="107.7935" font-family="sans-serif" fill="#000000">2. Acquittement technique</text></g><g data-participant-1="Hub" data-participant-2="Hub" class="message"><line y1="141.9922" x1="253.0303" y2="141.9922" style="stroke:#181818;stroke-width:1;" x2="295.0303"></line><line y1="141.9922" x1="295.0303" y2="154.9922" style="stroke:#181818;stroke-width:1;" x2="295.0303"></line><line y1="154.9922" x1="254.0303" y2="154.9922" style="stroke:#181818;stroke-width:1;" x2="295.0303"></line><polygon style="stroke:#181818;stroke-width:1;" fill="#181818" points="264.0303,150.9922,254.0303,154.9922,264.0303,158.9922,260.0303,154.9922"></polygon><text lengthAdjust="spacing" x="260.0303" font-size="13" textLength="243.5215" y="136.9263" font-family="sans-serif" fill="#000000">2.1 Inscription dans la file B.message</text></g><g data-participant-1="Hub" data-participant-2="LRM" class="message"><polygon style="stroke:#181818;stroke-width:1;" fill="#181818" points="50.2925,195.2578,40.2925,199.2578,50.2925,203.2578,46.2925,199.2578"></polygon><line y1="199.2578" x1="44.2925" y2="199.2578" style="stroke:#181818;stroke-width:1;" x2="252.0303"></line><text lengthAdjust="spacing" x="56.2925" font-size="13" textLength="185.6055" y="179.0591" font-family="sans-serif" fill="#000000">3. Transmission du message</text><text lengthAdjust="spacing" x="56.2925" font-size="13" textLength="98.2935" y="194.1919" font-family="sans-serif" fill="#000000">au destinataire</text></g><g data-participant-1="LRM" data-participant-2="Hub" class="message"><polygon style="stroke:#181818;stroke-width:1;" fill="#181818" points="241.0303,224.3906,251.0303,228.3906,241.0303,232.3906,245.0303,228.3906"></polygon><line y1="228.3906" x1="39.2925" y2="228.3906" style="stroke:#181818;stroke-width:1;" x2="247.0303"></line><text lengthAdjust="spacing" x="46.2925" font-size="13" textLength="137.0078" y="223.3247" font-family="sans-serif" fill="#000000">4. Acquittement final</text></g><g data-participant-1="Hub" data-participant-2="Hub" class="message"><line y1="257.5234" x1="253.0303" y2="257.5234" style="stroke:#181818;stroke-width:1;" x2="295.0303"></line><line y1="257.5234" x1="295.0303" y2="270.5234" style="stroke:#181818;stroke-width:1;" x2="295.0303"></line><line y1="270.5234" x1="254.0303" y2="270.5234" style="stroke:#181818;stroke-width:1;" x2="295.0303"></line><polygon style="stroke:#181818;stroke-width:1;" fill="#181818" points="264.0303,266.5234,254.0303,270.5234,264.0303,274.5234,260.0303,270.5234"></polygon><text lengthAdjust="spacing" x="260.0303" font-size="13" textLength="207.7144" y="252.4575" font-family="sans-serif" fill="#000000">4.1 Inscription dans la file A.ack</text></g><g data-participant-1="Hub" data-participant-2="PTF" class="message"><polygon style="stroke:#181818;stroke-width:1;" fill="#181818" points="512.4937,310.7891,522.4937,314.7891,512.4937,318.7891,516.4937,314.7891"></polygon><line y1="314.7891" x1="253.0303" y2="314.7891" style="stroke:#181818;stroke-width:1;" x2="518.4937"></line><text lengthAdjust="spacing" x="260.0303" font-size="13" textLength="229.8042" y="294.5903" font-family="sans-serif" fill="#000000">4.2 Transmission de l'acquittement</text><text lengthAdjust="spacing" x="260.0303" font-size="13" textLength="98.2935" y="309.7231" font-family="sans-serif" fill="#000000">au destinataire</text></g><g data-participant-1="LRM" data-participant-2="Hub" class="message"><polygon style="stroke:#181818;stroke-width:1;" fill="#181818" points="241.0303,355.0547,251.0303,359.0547,241.0303,363.0547,245.0303,359.0547"></polygon><line y1="359.0547" x1="39.2925" y2="359.0547" style="stroke:#181818;stroke-width:1;" x2="247.0303"></line><text lengthAdjust="spacing" x="46.2925" font-size="13" textLength="129.7397" y="338.856" font-family="sans-serif" fill="#000000">5. Message d'erreur</text><text lengthAdjust="spacing" x="46.2925" font-size="13" textLength="91.3301" y="353.9888" font-family="sans-serif" fill="#000000">(si applicable)</text></g><g data-participant-1="Hub" data-participant-2="Hub" class="message"><line y1="388.1875" x1="253.0303" y2="388.1875" style="stroke:#181818;stroke-width:1;" x2="295.0303"></line><line y1="388.1875" x1="295.0303" y2="401.1875" style="stroke:#181818;stroke-width:1;" x2="295.0303"></line><line y1="401.1875" x1="254.0303" y2="401.1875" style="stroke:#181818;stroke-width:1;" x2="295.0303"></line><polygon style="stroke:#181818;stroke-width:1;" fill="#181818" points="264.0303,397.1875,254.0303,401.1875,264.0303,405.1875,260.0303,401.1875"></polygon><text lengthAdjust="spacing" x="260.0303" font-size="13" textLength="209.4536" y="383.1216" font-family="sans-serif" fill="#000000">5.1 Inscription dans la file A.info</text></g><g data-participant-1="Hub" data-participant-2="PTF" class="message"><polygon style="stroke:#181818;stroke-width:1;" fill="#181818" points="512.4937,441.4531,522.4937,445.4531,512.4937,449.4531,516.4937,445.4531"></polygon><line y1="445.4531" x1="253.0303" y2="445.4531" style="stroke:#181818;stroke-width:1;" x2="518.4937"></line><text lengthAdjust="spacing" x="260.0303" font-size="13" textLength="243.3311" y="425.2544" font-family="sans-serif" fill="#000000">5.2 Tranmission du message d'erreur</text><text lengthAdjust="spacing" x="260.0303" font-size="13" textLength="98.2935" y="440.3872" font-family="sans-serif" fill="#000000">au destinataire</text></g></g></svg></p>
</div>

<h3 id="structure-et-format-des-messages-transitant-via-le-hub-santé">Structure et format des messages transitant via le Hub Santé</h3>

<h4 id="enveloppe-edxl-de">Enveloppe EDXL-DE</h4>

<p>Tous les messages transitant par l’intermédiaire du Hub Santé contiendront un entête de type "EDXL-DE" (cf. <a href="https://hub.esante.gouv.fr/resources/Accompagnement/tech/23.09%20DST%20v1.2%20-%20Hub%20Sante%20&amp;%20connecteurs.pdf">spécifications techniques (DST) du Hub Santé</a>) dans lequel sera encapsulé le détail du message (cf. spécifications du Hub Santé &sect;3.4 et 3.4.3).</p>

<p>Le tableau ci-dessous précise les balises de l’enveloppe EDXL-DE qui doivent être envoyées et qui sont nécessaires au routage des messages.</p>

<table>
  <thead>
    <tr>
      <th>Élément</th>
      <th>Champ</th>
      <th>Type</th>
      <th>Description</th>
      <th>Commentaire / valeur</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><em>Entête EDXL-DE</em></td>
      <td>distributionID</td>
      <td>string</td>
      <td>Identifiant unique du message attribué par l’expéditeur</td>
      <td>Format <code class="language-plaintext highlighter-rouge">&lt;senderId&gt;_&lt;internalId&gt;</code> où <code class="language-plaintext highlighter-rouge">&lt;internalId&gt;</code> est un identifiant garanti unique</td>
    </tr>
    <tr>
      <td><em>Entête EDXL-DE</em></td>
      <td>senderID</td>
      <td>string</td>
      <td>Identifiant de l'émetteur</td>
      <td><code class="language-plaintext highlighter-rouge">fr.health.ptfsas</code>, fr.health.samuXXX</td>
    </tr>
    <tr>
      <td><em>Entête EDXL-DE</em></td>
      <td>dateTimeSent</td>
      <td>Date time</td>
      <td>Date et heure d'envoi du message</td>
      <td>Ex : 2025-08-24T14:15:22+02:00</td>
    </tr>
    <tr>
      <td><em>Entête EDXL-DE</em></td>
      <td>dateTimeExpires</td>
      <td>Date time</td>
      <td>Date et heure d'expiration du message : les données ne doivent pas être délivrées au-delà de cette date</td>
      <td>Ex : 2025-08-24T14:15:22+02:00</td>
    </tr>
    <tr>
      <td><em>Entête EDXL-DE</em></td>
      <td>distributionStatus</td>
      <td>string</td>
      <td>Statut du message</td>
      <td>Valeur fixe : <code class="language-plaintext highlighter-rouge">Actual</code></td>
    </tr>
    <tr>
      <td><em>Entête EDXL-DE</em></td>
      <td>distributionKind</td>
      <td>string</td>
      <td>Type du message</td>
      <td><code class="language-plaintext highlighter-rouge">Report</code>, <code class="language-plaintext highlighter-rouge">Ack</code>, <code class="language-plaintext highlighter-rouge">Error</code></td>
    </tr>
    <tr>
      <td><em>Entête EDXL-DE</em></td>
      <td>descriptor.language</td>
      <td>string</td>
      <td>Langue du message échangé</td>
      <td>Valeur fixe : <code class="language-plaintext highlighter-rouge">fr-FR</code></td>
    </tr>
    <tr>
      <td><em>Entête EDXL-DE</em></td>
      <td>descriptor.explicitAddress.explicitAddressScheme</td>
      <td>string</td>
      <td>Identifiant du SI pilotant le Hub</td>
      <td>Valeur fixe : <code class="language-plaintext highlighter-rouge">Hubex</code></td>
    </tr>
    <tr>
      <td><em>Entête EDXL-DE</em></td>
      <td>descriptor.explicitAddress.explicitAddressValue</td>
      <td>string</td>
      <td>Identifiant du destinataire</td>
      <td><code class="language-plaintext highlighter-rouge">fr.health.ptfsas</code>, fr.health.samuXXX</td>
    </tr>
    <tr>
      <td><em>Contenu</em></td>
      <td>content.contentObject.JsonContent.embeddedJsonContent</td>
      <td>json</td>
      <td>Contenu du message json encapsulé dans l'entête</td>
      <td>Fichier json contenant les données transmises</td>
    </tr>
  </tbody>
</table>

<h4 id="entête-rc-de">Entête RC-DE</h4>

<p>Le contenu des messages transmis pourra également être encapsulé dans un entête RC-DE au sein de l’enveloppe EDXL-DE. L'entête RC-DE contient un nombre de champs communs à l'entête EDXL-DE, ce qui permet de rendre le message auportortant sans l'entête EDXL-DE selon le modèle et les balises précisées dans le tableau ci-dessous (cf spécifications du Hub Santé &sect;3.3.2).</p>

<table>
  <thead>
    <tr>
      <th>Élément</th>
      <th>Champ</th>
      <th>Type</th>
      <th>Description</th>
      <th>Commentaire / valeur</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><em>Entête RC-DE</em></td>
      <td>messageId</td>
      <td>string</td>
      <td>Identifiant du message interne. Identique au champ <code class="language-plaintext highlighter-rouge">distributionID</code> de l'enveloppe EDXL-DE</td>
      <td>Égal à <code class="language-plaintext highlighter-rouge">distributionId</code> du message initial dans le cas d'un acquittement</td>
    </tr>
    <tr>
      <td><em>Entête RC-DE</em></td>
      <td>sender.AddresseeType.name</td>
      <td>string</td>
      <td>Identifiant de l'émetteur</td>
      <td><code class="language-plaintext highlighter-rouge">fr.health.ptfsas</code>, fr.health.samuXXX</td>
    </tr>
    <tr>
      <td><em>Entête RC-DE</em></td>
      <td>sender.AddresseeType.URL</td>
      <td>string</td>
      <td>URL de l'émetteur</td>
      <td><code class="language-plaintext highlighter-rouge">hubex:fr.health.ptfsas</code>, hubex:fr.fr.health.samuXXX,</td>
    </tr>
    <tr>
      <td><em>Entête RC-DE</em></td>
      <td>sentAt</td>
      <td>Date time</td>
      <td>Date et heure d'envoi du message</td>
      <td>Ex : 2025-08-24T14:15:22+02:00</td>
    </tr>
    <tr>
      <td><em>Entête RC-DE</em></td>
      <td>status</td>
      <td>string</td>
      <td>Statut du message</td>
      <td>Valeur fixe : <code class="language-plaintext highlighter-rouge">Actual</code></td>
    </tr>
    <tr>
      <td><em>Entête RC-DE</em></td>
      <td>kind</td>
      <td>string</td>
      <td>Type du message</td>
      <td><code class="language-plaintext highlighter-rouge">Report</code>, <code class="language-plaintext highlighter-rouge">Ack</code></td>
    </tr>
    <tr>
      <td><em>Entête RC-DE</em></td>
      <td>recipients.recipient.explicitAddressScheme</td>
      <td>string</td>
      <td>Identifiant du SI pilotant le Hub</td>
      <td>Valeur fixe : <code class="language-plaintext highlighter-rouge">Hubex</code></td>
    </tr>
    <tr>
      <td><em>Entête RC-DE</em></td>
      <td>recipients.recipient.explicitAddressValue</td>
      <td>string</td>
      <td>Identifiant du destinataire</td>
      <td><code class="language-plaintext highlighter-rouge">fr.health.ptfsas</code>, fr.health.samuXXX</td>
    </tr>
  </tbody>
</table>

<h4 id="message-de-référence-rc-ref">Message de référence RC-REF</h4>

<p>Le message de référence permet de faire référence à un message précédemment partagé (spécifications du Hub Santé &sect;3.4.6). Il est utilisé en cas d'acquittement final, cf. ci-dessous.
Sa structure est la même que celle d'un message RC-DE, avec l'ajout d'un champ supplémentaire <code class="language-plaintext highlighter-rouge">reference</code> qui reprend le <code class="language-plaintext highlighter-rouge">distributionId</code> du message acquitté.</p>

<h3 id="détail-des-échanges-entre-la-plateforme-sas-et-le-hub-santé">Détail des échanges entre la plateforme SAS et le Hub Santé</h3>

<h4 id="gestion-de-lenvoi-dun-message-ptf-sas---lrm-via-hub">Gestion de l'envoi d'un message PTF SAS -&gt; LRM via Hub</h4>

<p>Le message contenant les informations de RDV pris par le régulateur pour le compte du patient est envoyé instantanément par la plateforme numérique SAS au HubSanté. Le message est transmis avec un entête est de type "EDXL-DE" (cf <a href="./specifications_techniques-transmission-info-RDV-LRM.html#enveloppe-edxl-de">Enveloppe EDXL-DE</a>) encapsulant un entête de type RC-DE (cf <a href="./specifications_techniques-transmission-info-RDV-LRM.html#entête-rc-de">Enveloppe RC-DE</a>) et les contenus des messages au format Json (cf <a href="./specifications_techniques-transmission-info-RDV-LRM.html#données-transmises-au-lrm">Données transmises au LRM</a>).</p>

<p>Il s'agit d'un message où le champ <code class="language-plaintext highlighter-rouge">distribution.kind</code> (entête EDXL-DE) et <code class="language-plaintext highlighter-rouge">kind</code> (entête RC-DE) est valorisé à <code class="language-plaintext highlighter-rouge">Report</code>.</p>

<h4 id="acquittement-technique-hub---ptf-sas">Acquittement technique Hub -&gt; PTF SAS</h4>

<p>Un acquittement technique sera transmis du Hub vers la plateforme SAS afin d'informer de la bonne prise en charge du message et de l'inscription dans sa file d'envoi (file « message » du LRM). Cette fonctionnalité est intégrée au protocole AMQ sous la forme de <em>Consumer Acknowledgement</em> (cf. spécifications du Hub Santé &sect;3.3.1).</p>

<h4 id="message-dacquittement-final-et-gestion-des-erreurs">Message d'acquittement final et gestion des erreurs</h4>

<p>Les échanges entre le Hub Santé et la plateforme numérique SAS incluent également les acquittements de réception finale et la gestion des messages d’erreurs transmis par les éditeurs de LRM.
Une fois le message intégré dans le système du client destinataire (Editeur LRM), ce dernier peut en informer la plateforme numérique SAS (transitant par le Hub) en lui envoyant un acquittement de réception finale sur un deuxième type de file dédié fr.health.ptfsas.&#x1D44E;&#x1D450;k permettant de remonter les accusés de réception finale. Le cheminement est similaire au message envoyé mais pris en sens inverse.</p>

<p>Un troisième type de file, fr.health.ptfsas.&#x1D456;&#x1D45B;&#x1D453;&#x1D45C;, est mis en place pour remonter des informations et de potentielles erreurs aux émetteurs et destinataires des messages. A noter qu'il existe deux types d'erreur :</p>
<ul>
  <li>les messages "techniques" directement générés par le Hub et traduisant une impossibilité de remettre le message au destinataire</li>
  <li>les messages d'erreurs "fonctionnels" envoyés depuis l’éditeur de LRM (transitant par le Hub) traduisant l'impossibilité de traiter correctement le message reçu (cf <a href="./specifications_techniques-transmission-info-RDV-LRM.html#message-derreur-lrm---hub">erreurs LRM</a>)</li>
</ul>

<p>Il s'agit de messages où le champ <code class="language-plaintext highlighter-rouge">distribution.kind</code> est valorisé à <code class="language-plaintext highlighter-rouge">Error</code> (entête EDXL-DE, les messages d'erreur ne comportent pas d'entête RC-DE)</p>

<p>L'erreur sera présente dans le contenu du message json qui respecte le modèle suivant, cf. spécifications du Hub Santé, &sect;3.4.7 :</p>

<table>
  <thead>
    <tr>
      <th>Champ</th>
      <th>Description</th>
      <th>Commentaire / valeur</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>errorCode</td>
      <td>Code de l'erreur ayant conduit au rejet du message</td>
      <td>Cf. tableau des erreurs ci-après</td>
    </tr>
    <tr>
      <td>errorCause</td>
      <td>Cause de l'erreur</td>
      <td>La cause de l’erreur. Le <code class="language-plaintext highlighter-rouge">distributionID</code> de l’enveloppe EDXL-DE y est précisé si le message a pu être désérialisé, ainsi que des éléments plus précis suivant l’erreur relevée.</td>
    </tr>
    <tr>
      <td>sourceMessage</td>
      <td>Contenu du message rejeté</td>
      <td>Contenu du message initial avec son entête</td>
    </tr>
  </tbody>
</table>

<p>A titre d'exemple, les codes d'erreur suivants pourront être envoyés du Hub vers la plateforme SAS :</p>

<table>
  <thead>
    <tr>
      <th>statusCode</th>
      <th>statusString</th>
      <th>description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>102</td>
      <td>UNRECOGNIZED_MESSAGE_FORMAT</td>
      <td>Le message n’a pas pu être désérialisé.</td>
    </tr>
    <tr>
      <td>300</td>
      <td>INVALID_MESSAGE</td>
      <td>Le message n’est pas conforme aux spécifications techniques (JSON Schema)</td>
    </tr>
    <tr>
      <td>400</td>
      <td>EXPIRED_MESSAGE_BEFORE_ROUTING</td>
      <td>Le message n’a pas été reçu par son destinataire, il a expiré sur le Hub avant de lui être délivré.</td>
    </tr>
    <tr>
      <td>500</td>
      <td>DEAD_LETTERED_QUEUE</td>
      <td>Le message n’a pas été reçu par son destinataire, il a expiré avant qu’il ne le dépile.</td>
    </tr>
  </tbody>
</table>

<h3 id="echanges-entre-léditeur-lrm-et-le-hub-santé">Echanges entre l'éditeur LRM et le Hub Santé</h3>

<h4 id="message-dacquittement-final-lrm---ptf">Message d'acquittement final LRM -&gt; PTF</h4>

<p>Cet acquittement correspond à la validation auprès de l’émetteur (plateforme numérique SAS) de la bonne réception du message par le destinataire (Editeur LRM).</p>

<p>Le format des acquittements de réception finale est contenu dans une enveloppe de type "EDXL-DE" (cf <a href="./specifications_techniques-transmission-info-RDV-LRM.html#enveloppe-edxl-de">Enveloppe EDXL-DE</a>) et un message de type "RC-REF" (cf <a href="./specifications_techniques-transmission-info-RDV-LRM.html#message-de-référence-rc-ref">Message RC-REF</a>)</p>

<p>En résumé, le message doit :</p>
<ul>
  <li>spécifier EDXL-DE.distributionKind à <code class="language-plaintext highlighter-rouge">Ack</code></li>
  <li>spécifier RC-DE.kind à <code class="language-plaintext highlighter-rouge">Ack</code></li>
  <li>faire référence au message à acquitter (par sa <code class="language-plaintext highlighter-rouge">distributionID</code>)</li>
</ul>

<h4 id="message-derreur-lrm---hub">Message d'erreur LRM -&gt; Hub</h4>

<p>En cas d'erreur, un message est posté sur la file « info » de la plateforme SAS (cf. spécifications du Hub Santé <span class="fhir-conformance">3.3.4). Le message est transmis avec un entête de type "EDXL-DE" (cf <a href="./specifications_techniques-transmission-info-RDV-LRM.html#enveloppe-edxl-de">Enveloppe EDXL-DE</a>) où <code class="language-plaintext highlighter-rouge">distribution.kind</code> est valorisé à <code class="language-plaintext highlighter-rouge">Error</code>, encapsulant le contenu du message json qui respecte le modèle suivant (cf. spécifications du Hub Santé </span>3.4.7) :</p>

<table>
  <thead>
    <tr>
      <th>Champ</th>
      <th>Description</th>
      <th>Commentaire</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>errorCode</td>
      <td>Code de l'erreur ayant conduit au rejet du message</td>
      <td>Cf. ci-après</td>
    </tr>
    <tr>
      <td>errorCause</td>
      <td>Cause de l'erreur</td>
      <td>La cause de l’erreur. Le <code class="language-plaintext highlighter-rouge">distributionID</code> de l’enveloppe EDXL y est précisé si le message a pu être désérialisé, ainsi que des éléments plus précis suivant l’erreur relevée.</td>
    </tr>
    <tr>
      <td>sourceMessage</td>
      <td>Contenu du message rejeté</td>
      <td>Contenu du message initial avec son entête</td>
    </tr>
  </tbody>
</table>

<p>Le LRM pourra envoyer des messages de type :</p>
<ul>
  <li>409 (CONFLICT) - L'identifiant du RDV à créér existe déjà</li>
</ul>

<h3 id="données-transmises-au-lrm">Données transmises au LRM</h3>

<p>Lorsqu’un régulateur prend RDV pour un patient via la plateforme numérique SAS, celle-ci transmet un message de création de RDV qui suivra les modalités suivantes :</p>

<ul>
  <li><strong>Protocole</strong> : <span style="color:blue">AMQP 0-9-1<br/>
</span></li>
  <li><strong>En-tête</strong> : <span style="color:blue">EDXL-DE, RC-DE 
</span></li>
  <li><strong>Sender</strong> : <span style="color:blue">fr.health.ptfsas<br/>
</span></li>
  <li><strong>Format du message contenu</strong> : <span style="color:blue">JSON
</span></li>
</ul>

<p>Le message json contenant les données et encapsulé dans l'entête EDXL-DE (et dans l'entête RC-DE) respecte le format suivant :</p>

<table style="table-layout: fixed; width: 100%; font-size: 8px">
  <tbody>
    <tr style="text-align: center;">
      <th style="width: 8%;"><strong>ID</strong></th>
      <th style="width: 8%;"><strong>Objet</strong></th>
      <th style="width: 8%;"><strong>Balise</strong></th>
      <th style="width: 30%;"><strong>Description</strong></th>
      <th style="width: 6%;"><strong>Exemples</strong></th>
      <th style="width: 8%;"><strong>Cardinalité</strong></th>
      <th style="width: 7%;"><strong>Type</strong></th>
    </tr>
    <tr>
      <td>1</td>
      <td></td>
      <td>appointmentId</td>
      <td>Identifiant technique unique du RDV</td>
      <td>1efc111e-ce11-1d11-a111-11c1f11c111e12348</td>
      <td>1..1</td>
      <td>string</td>
    </tr>
    <tr>
      <td>2</td>
      <td></td>
      <td>method</td>
      <td>Indique un message de création ou de modification du rendez-vous</td>
      <td>createAppointment</td>
      <td>1..1</td>
      <td>string</td>
    </tr>
    <tr>
      <td>3</td>
      <td></td>
      <td>created</td>
      <td>Date et heure de la prise de RDV</td>
      <td>2025-06-17T10:15:56+01:00</td>
      <td>1..1</td>
      <td>datetime</td>
    </tr>
    <tr>
      <td>4</td>
      <td></td>
      <td>start</td>
      <td>Date et heure de début du rendez-vous</td>
      <td>2025-06-17T14:00:00+01:00</td>
      <td>1..1</td>
      <td>datetime</td>
    </tr>
    <tr>
      <td>5</td>
      <td></td>
      <td>end</td>
      <td>Date et heure de fin du rendez-vous</td>
      <td>2025-06-17T14:20:00+01:00</td>
      <td>0..1</td>
      <td>datetime</td>
    </tr>
    <tr>
      <td>6</td>
      <td></td>
      <td>status</td>
      <td>Statut du rendez-vous</td>
      <td>booked</td>
      <td>1..1</td>
      <td>string</td>
    </tr>
    <tr>
      <td>7</td>
      <td></td>
      <td>orientationCategory</td>
      <td>Indique la catégorie de l’orientation SAS identifiée</td>
      <td>SOS</td>
      <td>0..1</td>
      <td>string</td>
    </tr>
    <tr>
      <td>8</td>
      <td>practitioner</td>
      <td>Professionnel de santé</td>
      <td>Représente le professionnel de santé associé au rendez-vous</td>
      <td></td>
      <td>0..1</td>
      <td>practitioner</td>
    </tr>
    <tr>
      <td>9</td>
      <td>practitioner</td>
      <td>rppsId</td>
      <td>Identifiant national (RPPS avec préfixe) du PS effecteur de soins</td>
      <td>810002909371</td>
      <td>1..1</td>
      <td>string</td>
    </tr>
    <tr>
      <td>10</td>
      <td>practitioner</td>
      <td>lastName</td>
      <td>Nom du professionnel de santé</td>
      <td>Dupont</td>
      <td>1..1</td>
      <td>string</td>
    </tr>
    <tr>
      <td>11</td>
      <td>practitioner</td>
      <td>firstName</td>
      <td>Prénom du professionnel de santé</td>
      <td>Jean</td>
      <td>1..1</td>
      <td>string</td>
    </tr>
    <tr>
      <td>12</td>
      <td>practitioner</td>
      <td>specialityCode</td>
      <td>Code de la spécialité du professionnel de santé</td>
      <td>SM54 (pour médecine générale)</td>
      <td>0..1</td>
      <td>string</td>
    </tr>
    <tr>
      <td>13</td>
      <td>practitioner</td>
      <td>specialityUrl</td>
      <td>Url de la terminologie utilisée pour la spécialité</td>
      <td>https://mos.esante.gouv.fr/NOS/TRE_R38-SpecialiteOrdinale/FHIR/TRE-R38-SpecialiteOrdinale</td>
      <td>0..1</td>
      <td>string</td>
    </tr>
    <tr>
      <td>14</td>
      <td>practitioner</td>
      <td>professionCode</td>
      <td>Code de la profession du professionnel de santé</td>
      <td>10 (pour médecin)</td>
      <td>0..1</td>
      <td>string</td>
    </tr>
    <tr>
      <td>15</td>
      <td>practitioner</td>
      <td>professionUrl</td>
      <td>Url de la terminologie utilisée pour la profession</td>
      <td>https://mos.esante.gouv.fr/NOS/TRE_G15-ProfessionSante/FHIR/TRE-G15-ProfessionSante</td>
      <td>0..1</td>
      <td>string</td>
    </tr>
    <tr>
      <td>16</td>
      <td>organization</td>
      <td></td>
      <td>Représente la structure du PS ou la structure associée au rendez-vous si le PS n'est pas connu</td>
      <td></td>
      <td>0..1</td>
      <td>organization</td>
    </tr>
    <tr>
      <td>17</td>
      <td>organization</td>
      <td>organizationId</td>
      <td>Identifiant national de la structure (avec préfixe)</td>
      <td>334173748400020</td>
      <td>1..1</td>
      <td>string</td>
    </tr>
    <tr>
      <td>18</td>
      <td>organization</td>
      <td>name</td>
      <td>Nom de la structure</td>
      <td>SOS Médecins de Rennes</td>
      <td>1..1</td>
      <td>string</td>
    </tr>
    <tr>
      <td>19</td>
      <td>regulator</td>
      <td></td>
      <td>Représente le régulateur ayant pris le RDV</td>
      <td></td>
      <td>1..1</td>
      <td>regulator</td>
    </tr>
    <tr>
      <td>20</td>
      <td>regulator</td>
      <td>regulatorId</td>
      <td>Identifiant associé au compte SAS du régulateur ayant pris le RDV</td>
      <td>3620100057/70326SR</td>
      <td>0..1</td>
      <td>string</td>
    </tr>
    <tr>
      <td>21</td>
      <td>regulator</td>
      <td>regulatorName</td>
      <td>Nom du régulateur ayant pris le RDV</td>
      <td>Ricart</td>
      <td>1..1</td>
      <td>string</td>
    </tr>
    <tr>
      <td>22</td>
      <td>regulator</td>
      <td>regulatorFirstname</td>
      <td>Prénom du régulateur ayant pris le RDV</td>
      <td>Pauline</td>
      <td>1..1</td>
      <td>string</td>
    </tr>
    <tr>
      <td>23</td>
      <td>regulator</td>
      <td>regulatorEmail</td>
      <td>Adresse email associée au compte SAS du régulateur ayant pris le RDV</td>
      <td>pauline.ricart@ghsas.fr</td>
      <td>1..1</td>
      <td>string</td>
    </tr>
  </tbody>
</table>

<p><br/>
Cf. exemple ci-dessous de message de création</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"appointment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"appointmentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2d2db05f-e2b0-4169-be8f-891806da2c74"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CreateAppointment"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2025-06-17T10:15:00+02:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"booked"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"orientationCategory"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PS"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"start"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2025-06-17T14:00:00+02:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"end"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2025-06-17T14:20:00+02:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"practitioner"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"rppsId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"810005681340"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MOREL"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Didier"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"specialityCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SM54"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"specialityUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://mos.esante.gouv.fr/NOS/TRE_R38-SpecialiteOrdinale/FHIR/TRE-R38-SpecialiteOrdinale"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"professionUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://mos.esante.gouv.fr/NOS/TRE_G15-ProfessionSante/FHIR/TRE-G15-ProfessionSante"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"professionCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"regulator"</span><span class="p">:{</span><span class="w">
      </span><span class="nl">"regulatorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3620100057/70326SR"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"regulatorName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RICART"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"regulatorFirstname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Pauline"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"regulatorEmail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pauline.ricart@ghsas.fr"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>S'agissant d'une création de message, le champ <code class="language-plaintext highlighter-rouge">method</code> est valorisé à `CreateAppointment'</p>

<h3 id="message-de-modification-de-rdv">Message de modification de RDV</h3>

<p>La mise à jour des données du RDV peut porter sur chacun des éléments décrits avec modifications de données (dates du créneau, statut du RDV, etc.).ou bien ajout d'un objet (<code class="language-plaintext highlighter-rouge">practitioner</code> ou <code class="language-plaintext highlighter-rouge">organization</code>) et des attributs associés.</p>

<p>Le message transmis pour la mise à jour du RDV devra suivre les modalités suivantes :</p>

<ul>
  <li><strong>Protocole</strong> : <span style="color:blue">AMQP 0-9-1<br/>
</span></li>
  <li><strong>En-tête</strong> : <span style="color:blue">EDXL-DE, RC-DE
</span></li>
  <li><strong>Sender</strong> : <span style="color:blue">fr.health.ptfsas 
</span></li>
  <li><strong>Format du message contenu</strong> : <span style="color:blue">JSON
</span></li>
</ul>

<p>Le fichier json encapsulé dans l'entête aura le champ <code class="language-plaintext highlighter-rouge">method</code> valorisé à <code class="language-plaintext highlighter-rouge">UpdateAppointment</code> et contiendra les données modifiées / ajoutées / supprimées par rapport au message de création (selon le format décrit au paragraphe précédent) afin que les données pour un même identifiant de RDV puissent être mises à jour</p>

<p><strong>L’identifiant technique SAS du RDV (champ <code class="language-plaintext highlighter-rouge">appointmentId</code>)</strong> transmis sera stocké par la solution éditeur LRM pour identification du RDV sur lequel porte les mises à jour éventuelles.</p>

<p><strong>En cas de réception d'un message du mise à jour sur un identifiant inconnu, la solution LRM devra pouvoir gérer le message en tant que création avec les données contenues dans le message à l'instant t.</strong></p>

<p>Cf. exemple ci-dessous de message de modification</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"appointment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"appointmentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2d2db05f-e2b0-4169-be8f-891806da2c74"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UpdateAppointment"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2025-06-17T10:15:00+02:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fulfilled"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"orientationCategory"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PS"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"start"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2025-06-17T14:00:00+02:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"end"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2025-06-17T14:20:00+02:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"practitioner"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"rppsId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"810005681340"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MOREL"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Didier"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"specialityCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SM54"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"specialityUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://mos.esante.gouv.fr/NOS/TRE_R38-SpecialiteOrdinale/FHIR/TRE-R38-SpecialiteOrdinale"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"professionUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://mos.esante.gouv.fr/NOS/TRE_G15-ProfessionSante/FHIR/TRE-G15-ProfessionSante"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"professionCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"regulator"</span><span class="p">:{</span><span class="w">
      </span><span class="nl">"regulatorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3620100057/70326SR"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"regulatorName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RICART"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"regulatorFirstname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Pauline"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"regulatorEmail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pauline.ricart@ghsas.fr"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<h3 id="message-dannulation-de-rdv">Message d'annulation de RDV</h3>

<p>Il n’y aura pas de message spécifique pour l’annulation d’un RDV. Une annulation de RDV est modélisée par un message de type « mise à jour du RDV » avec la modification du statut du RDV à « annulé ».</p>

<p>Cf. exemple ci-dessous de message d'annulation.</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"appointment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"appointmentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2d2db05f-e2b0-4169-be8f-891806da2c74"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UpdateAppointment"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2025-06-17T10:15:00+02:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cancelled"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"orientationCategory"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PS"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"start"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2025-06-17T14:00:00+02:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"end"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2025-06-17T14:20:00+02:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"practitioner"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"rppsId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"810005681340"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MOREL"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Didier"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"specialityCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SM54"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"specialityUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://mos.esante.gouv.fr/NOS/TRE_R38-SpecialiteOrdinale/FHIR/TRE-R38-SpecialiteOrdinale"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"professionUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://mos.esante.gouv.fr/NOS/TRE_G15-ProfessionSante/FHIR/TRE-G15-ProfessionSante"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"professionCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"regulator"</span><span class="p">:{</span><span class="w">
      </span><span class="nl">"regulatorId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3620100057/70326SR"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"regulatorName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RICART"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"regulatorFirstname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Pauline"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"regulatorEmail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pauline.ricart@ghsas.fr"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<h3 id="détail-des-champs-transmis-et-nomenclatures">Détail des champs transmis et nomenclatures</h3>

<p>Cette section détaille les champs à utiliser afin de renseigner les différents éléments codifiés de la requête.</p>
<ul>
  <li>
    <p><strong>identifiant de la PTF SAS</strong> : Utilisé dans les entêtes EDXL-DE et RC-DE. Valeur fixe par environnement. Pour l'environnement de PROD, sera valorisé à <code class="language-plaintext highlighter-rouge">fr.health.ptfsas</code>. Pour un environnement hors PROD, la valeur sera <code class="language-plaintext highlighter-rouge">fr.health.test.ptfsas</code>.</p>
  </li>
  <li><strong>method</strong> : Indique un message de création ou de mise à jour. Les valeurs suivantes sont attendues :
    <ul>
      <li>createAppointment</li>
      <li>updateAppointment</li>
    </ul>
  </li>
  <li>
    <p><strong>appointmentId</strong> : Un identifiant technique unique par RDV est transmis. Cet ID est défini par la plateforme numérique SAS et peut prendre la forme d’un UUID par exemple. La solution éditeur devra s’appuyer sur cet ID pour la gestion des requêtes de mises à jour.</p>
  </li>
  <li><strong>status</strong> : L’utilisation de la nomenclature standard AppointmentStatus (http://hl7.org/fhir/appointmentstatus) est attendue. La plateforme numérique SAS exploite à date les valeurs suivantes :
    <ul>
      <li>PENDING : RDV en attente de confirmation</li>
      <li>BOOKED : RDV pris et confirmé</li>
      <li>FULFILLED : RDV honoré</li>
      <li>NOSHOW : RDV non honoré</li>
      <li>CANCELLED : RDV annulé</li>
    </ul>
  </li>
  <li><strong>orientationCategory</strong> : catégorie d'orientation transmise. Prend une valeur parmi la liste suivante :
    <ul>
      <li>PS</li>
      <li>SOS</li>
      <li>PDM</li>
      <li>CPTS</li>
      <li>CDS</li>
      <li>MSP</li>
    </ul>
  </li>
  <li>
    <p><strong>practitioner.rppsId</strong> : RPPS avec préfixe « 8 »</p>
  </li>
  <li>
    <p><strong>practitioner.specialtyCode</strong> : Code issu de la nomenclature des spécialités ordinales du NOS (<a href="https://mos.esante.gouv.fr/NOS/TRE_R38-SpecialiteOrdinale/FHIR/TRE-R38-SpecialiteOrdinale/">https://mos.esante.gouv.fr/NOS/TRE_R38-SpecialiteOrdinale/FHIR/TRE-R38-SpecialiteOrdinale/</a>)</p>
  </li>
  <li>
    <p><strong>practitioner.professionCode</strong> : Code issu de la nomenclature des professions de santédu NOS (<a href="https://mos.esante.gouv.fr/NOS/TRE_G15-ProfessionSante/FHIR/TRE-G15-ProfessionSante/">https://mos.esante.gouv.fr/NOS/TRE_G15-ProfessionSante/FHIR/TRE-G15-ProfessionSante/</a>)</p>
  </li>
  <li>
    <p><strong>organizationId</strong> : Identifiant unique propre à chaque structure de soins. Les champs sont valorisés comme suit : numéro du FINESS avec préfixe « 1 » ou numéro du SIRET avec préfixe « 3 »</p>
  </li>
  <li>
    <p><strong>regulatorId</strong> : Identifiant unique du régulateur ayant pris le RDV. Il s'agira uniquemet d'un identifiant national "IDNPS"(identifiant présent sur la carte CPx du régulateur). En effet, certains régulateurs n’ayant pas encore d’identifiant national à date, un identifiant technique de type uuid est créé. Cet identifiant étant connu uniquement de la PTF SAS, il ne sera pas transmis dans le flux. 
<em>Exemple d'identifiant national</em> : <code class="language-plaintext highlighter-rouge">3620100057/70326SR</code></p>
  </li>
  <li><strong>regulatorEmail</strong> : Il s'agit de l'adresse mail du compte du régulateur telle que déclarée dans la plateforme SAS. Elle correspond également à l'identifiant de connexion à la plateforme.</li>
</ul>

<h3 id="exemples-de-messages-complets-avec-entêtes-et-contenu">Exemples de messages complets avec entêtes et contenu</h3>

<p><em>Message PTF SAS -&gt; SAMU 33</em></p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"distributionID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr.health.ptfsas_30c8e00d-68b2-4092-a4f2-a9cb19b416e9"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"senderID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr.health.ptfsas"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"dateTimeSent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2025-10-28T17:05:54+01:00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"dateTimeExpires"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2072-09-27T08:23:34+02:00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"distributionStatus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Actual"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"distributionKind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Report"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"descriptor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr-FR"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"explicitAddress"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"explicitAddressScheme"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hubex"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"explicitAddressValue"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr.health.samu330"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"jsonContent"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"embeddedJsonContent"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"messageId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr.health.ptfsas_30c8e00d-68b2-4092-a4f2-a9cb19b416e9"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"sender"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr.health.ptfsas"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"URI"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hubex:fr.health.ptfsas"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"sentAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2025-10-28T17:05:54+01:00"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Actual"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Report"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"recipient"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
              </span><span class="p">{</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr.health.samu330"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"URI"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hubex:fr.health.samu330"</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"appointment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"appointmentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2d2db05f-e2b0-4169-be8f-891806da2c74"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CreateAppointment"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2025-06-17T10:15:00+02:00"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"booked"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"orientationCategory"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PS"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"start"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2025-06-17T14:00:00+02:00"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"end"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2025-06-17T14:20:00+02:00"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"practitioner"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"rppsId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"810005681340"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MOREL"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Didier"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"specialityCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SM54"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"specialityUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://mos.esante.gouv.fr/NOS/TRE_R38-SpecialiteOrdinale/FHIR/TRE-R38-SpecialiteOrdinale"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"professionUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://mos.esante.gouv.fr/NOS/TRE_G15-ProfessionSante/FHIR/TRE-G15-ProfessionSante"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"professionCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Détail du message</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="err">//entête</span><span class="w"> </span><span class="err">EDXL-DE</span><span class="w">
  </span><span class="nl">"distributionID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr.health.ptfsas_30c8e00d-68b2-4092-a4f2-a9cb19b416e9"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"senderID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr.health.ptfsas"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"dateTimeSent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2025-10-28T17:05:54+01:00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"dateTimeExpires"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2072-09-27T08:23:34+02:00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"distributionStatus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Actual"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"distributionKind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Report"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"descriptor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr-FR"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"explicitAddress"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"explicitAddressScheme"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hubex"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"explicitAddressValue"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr.health.samu330"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="err">//contenu</span><span class="w"> </span><span class="err">au</span><span class="w"> </span><span class="err">format</span><span class="w"> </span><span class="err">json</span><span class="w">
      </span><span class="nl">"jsonContent"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"embeddedJsonContent"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> 
          </span><span class="err">//entête</span><span class="w"> </span><span class="err">RC-DE</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"messageId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr.health.ptfsas_30c8e00d-68b2-4092-a4f2-a9cb19b416e9"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"sender"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr.health.ptfsas"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"URI"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hubex:fr.health.ptfsas"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"sentAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2025-10-28T17:05:54+01:00"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Actual"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Report"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"recipient"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
              </span><span class="p">{</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr.health.samu330"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"URI"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hubex:fr.health.samu330"</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="err">//données</span><span class="w"> </span><span class="err">de</span><span class="w"> </span><span class="err">RDV</span><span class="w">
            </span><span class="nl">"appointment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"appointmentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2d2db05f-e2b0-4169-be8f-891806da2c74"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CreateAppointment"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2025-06-17T10:15:00+02:00"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"booked"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"orientationCategory"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PS"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"start"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2025-06-17T14:00:00+02:00"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"end"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2025-06-17T14:20:00+02:00"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"practitioner"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"rppsId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"810005681340"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MOREL"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Didier"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"specialityCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SM54"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"specialityUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://mos.esante.gouv.fr/NOS/TRE_R38-SpecialiteOrdinale/FHIR/TRE-R38-SpecialiteOrdinale"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"professionUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://mos.esante.gouv.fr/NOS/TRE_G15-ProfessionSante/FHIR/TRE-G15-ProfessionSante"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"professionCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p><em>Message acquittement final SAMU 33 -&gt; PTF SAS</em></p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"distributionID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr.health.samu330_cf21c600-3bd2-49e6-8651-c97dac05d021"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"senderID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr.health.samu330"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"dateTimeSent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2025-10-28T17:06:30+01:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"dateTimeExpires"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2072-09-27T08:23:34+02:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"distributionStatus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Actual"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"distributionKind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ack"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"descriptor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr-FR"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"explicitAddress"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"explicitAddressScheme"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hubex"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"explicitAddressValue"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr.health.ptfsas"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"jsonContent"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"embeddedJsonContent"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"messageId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr.health.samu330_cf21c600-3bd2-49e6-8651-c97dac05d021"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"sender"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr.health.samu330"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"URI"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hubex:fr.health.samu330"</span><span class="w">
                        </span><span class="p">},</span><span class="w">
                        </span><span class="nl">"sentAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2025-10-28T17:06:30+01:00"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ack"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Actual"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"recipient"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                            </span><span class="p">{</span><span class="w">
                                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr.health.ptfsas"</span><span class="p">,</span><span class="w">
                                </span><span class="nl">"URI"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hubex:fr.health.ptfsas"</span><span class="w">
                            </span><span class="p">}</span><span class="w">
                        </span><span class="p">],</span><span class="w">
                        </span><span class="nl">"reference"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"distributionID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr.health.ptfsas_30c8e00d-68b2-4092-a4f2-a9cb19b416e9"</span><span class="w">
                        </span><span class="p">}</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p><em>Message d'erreur retourné par le Hub suite à un envoi PTF SAS -&gt; SAMU 330</em></p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"distributionID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr.health.hub_29055e53-46e5-4a70-843c-335e7e058829"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"senderID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr.health.hub"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"dateTimeSent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2025-10-29T14:37:15+00:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"dateTimeExpires"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2025-10-30T14:37:15+00:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"distributionStatus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Actual"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"distributionKind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Error"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"descriptor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr-FR"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"explicitAddress"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"explicitAddressScheme"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hubex"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"explicitAddressValue"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr.health.test.ptfsas"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"jsonContent"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"embeddedJsonContent"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                                </span><span class="nl">"statusCode"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w">
                                </span><span class="nl">"statusString"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INVALID_MESSAGE"</span><span class="w">
                            </span><span class="p">},</span><span class="w">
                            </span><span class="nl">"errorCause"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Could not validate message against schema : errors occurred. </span><span class="se">\n</span><span class="s2">Issues found on the $.content[0].jsonContent.embeddedJsonContent.message content: </span><span class="se">\n</span><span class="s2"> - appointment.orientationCategory: does not have a value in the enumeration [CPTS, MSP, CDS, SOS, PS, PDM]</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"sourceMessage"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                                </span><span class="nl">"distributionID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr.health.ptfsas_c461338a-97ea-41e5-b9fa-af87840890ff"</span><span class="p">,</span><span class="w">
                                </span><span class="nl">"distributionKind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Report"</span><span class="p">,</span><span class="w">
                                </span><span class="nl">"senderID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr.health.ptfsas"</span><span class="p">,</span><span class="w">
                                </span><span class="nl">"dateTimeSent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2025-10-29T15:37:15+01:00"</span><span class="p">,</span><span class="w">
                                </span><span class="nl">"distributionStatus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Actual"</span><span class="p">,</span><span class="w">
                                </span><span class="nl">"descriptor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                                    </span><span class="nl">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr-FR"</span><span class="p">,</span><span class="w">
                                    </span><span class="nl">"explicitAddress"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                                        </span><span class="nl">"explicitAddressScheme"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hubex"</span><span class="p">,</span><span class="w">
                                        </span><span class="nl">"explicitAddressValue"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr.health.samu330"</span><span class="w">
                                    </span><span class="p">}</span><span class="w">
                                </span><span class="p">},</span><span class="w">
                                </span><span class="nl">"dateTimeExpires"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2072-09-27T08:23:34+02:00"</span><span class="p">,</span><span class="w">
                                </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                                    </span><span class="p">{</span><span class="w">
                                        </span><span class="nl">"jsonContent"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                                            </span><span class="nl">"embeddedJsonContent"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                                                </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                                                    </span><span class="nl">"messageId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr.health.ptfsas_c461338a-97ea-41e5-b9fa-af87840890ff"</span><span class="p">,</span><span class="w">
                                                    </span><span class="nl">"sender"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                                                        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr.health.ptfsas"</span><span class="p">,</span><span class="w">
                                                        </span><span class="nl">"URI"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hubex:fr.health.ptfsas"</span><span class="w">
                                                    </span><span class="p">},</span><span class="w">
                                                    </span><span class="nl">"sentAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2025-10-29T15:37:15+01:00"</span><span class="p">,</span><span class="w">
                                                    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Actual"</span><span class="p">,</span><span class="w">
                                                    </span><span class="nl">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Report"</span><span class="p">,</span><span class="w">
                                                    </span><span class="nl">"recipient"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                                                        </span><span class="p">{</span><span class="w">
                                                            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr.health.samu330"</span><span class="p">,</span><span class="w">
                                                            </span><span class="nl">"URI"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hubex:fr.health.samu330"</span><span class="w">
                                                        </span><span class="p">}</span><span class="w">
                                                    </span><span class="p">],</span><span class="w">
                                                    </span><span class="nl">"appointment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                                                        </span><span class="nl">"appointmentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2d2db05f-e2b0-4169-be8f-891806da2c74"</span><span class="p">,</span><span class="w">
                                                        </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CreateAppointment"</span><span class="p">,</span><span class="w">
                                                        </span><span class="nl">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2025-06-17T10:15:00+02:00"</span><span class="p">,</span><span class="w">
                                                        </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"booked"</span><span class="p">,</span><span class="w">
                                                        </span><span class="nl">"orientationCategory"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Medecin"</span><span class="p">,</span><span class="w">
                                                        </span><span class="nl">"start"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2025-06-17T14:00:00+02:00"</span><span class="p">,</span><span class="w">
                                                        </span><span class="nl">"end"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2025-06-17T14:20:00+02:00"</span><span class="p">,</span><span class="w">
                                                        </span><span class="nl">"practitioner"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                                                            </span><span class="nl">"rppsId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"810005681340"</span><span class="p">,</span><span class="w">
                                                            </span><span class="nl">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MOREL"</span><span class="p">,</span><span class="w">
                                                            </span><span class="nl">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Didier"</span><span class="p">,</span><span class="w">
                                                            </span><span class="nl">"specialityCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SM54"</span><span class="p">,</span><span class="w">
                                                            </span><span class="nl">"specialityUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://mos.esante.gouv.fr/NOS/TRE_R38-SpecialiteOrdinale/FHIR/TRE-R38-SpecialiteOrdinale"</span><span class="p">,</span><span class="w">
                                                            </span><span class="nl">"professionUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://mos.esante.gouv.fr/NOS/TRE_G15-ProfessionSante/FHIR/TRE-G15-ProfessionSante"</span><span class="p">,</span><span class="w">
                                                            </span><span class="nl">"professionCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="w">
                                                        </span><span class="p">}</span><span class="w">
                                                    </span><span class="p">}</span><span class="w">
                                                </span><span class="p">}</span><span class="w">
                                            </span><span class="p">}</span><span class="w">
                                        </span><span class="p">}</span><span class="w">
                                    </span><span class="p">}</span><span class="w">
                                </span><span class="p">]</span><span class="w">
                            </span><span class="p">},</span><span class="w">
                            </span><span class="nl">"referencedDistributionID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr.health.ptfsas_c461338a-97ea-41e5-b9fa-af87840890ff"</span><span class="w">
                        </span><span class="p">}</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>Dans ce cas, le type d'orientation est incorrect car il ne respecte pas la nomenclature établie.</p>

<p><em>Message d'erreur retourné par le LRM suite à un envoi PTF SAS -&gt; SAMU 330</em></p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"distributionID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr.health.hub_cb0f6f14-6b57-4fb5-a635-97705c8d31e8"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"senderID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr.health.samu330"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"dateTimeSent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2025-10-28T16:29:59+00:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"dateTimeExpires"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2025-10-29T16:29:59+00:00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"distributionStatus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Actual"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"distributionKind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Error"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"descriptor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr-FR"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"explicitAddress"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"explicitAddressScheme"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hubex"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"explicitAddressValue"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr.health.ptfsas"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"jsonContent"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"embeddedJsonContent"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                                </span><span class="nl">"statusCode"</span><span class="p">:</span><span class="w"> </span><span class="mi">409</span><span class="p">,</span><span class="w">
                                </span><span class="nl">"statusString"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CONFLICT"</span><span class="w">
                            </span><span class="p">},</span><span class="w">
                            </span><span class="nl">"errorCause"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Impossible de créer ce RDV. L'identifiant du RDV à créér '30c8e00d-68b2-4092-a4f2-a9cb19b416e9' existe déjà dans la solution"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"sourceMessage"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                                </span><span class="nl">"distributionID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr.health.ptfsas_44fce1e7-461e-4b15-91e2-b4168bed531e"</span><span class="p">,</span><span class="w">
                                </span><span class="nl">"distributionKind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Report"</span><span class="p">,</span><span class="w">
                                </span><span class="nl">"senderID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr.health.ptfsas"</span><span class="p">,</span><span class="w">
                                </span><span class="nl">"dateTimeSent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2025-10-28T17:29:59+01:00"</span><span class="p">,</span><span class="w">
                                </span><span class="nl">"distributionStatus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Actual"</span><span class="p">,</span><span class="w">
                                </span><span class="nl">"descriptor"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                                    </span><span class="nl">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr-FR"</span><span class="p">,</span><span class="w">
                                    </span><span class="nl">"explicitAddress"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                                        </span><span class="nl">"explicitAddressScheme"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hubex"</span><span class="p">,</span><span class="w">
                                        </span><span class="nl">"explicitAddressValue"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr.health.samu330"</span><span class="w">
                                    </span><span class="p">}</span><span class="w">
                                </span><span class="p">},</span><span class="w">
                                </span><span class="nl">"dateTimeExpires"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2072-09-27T08:23:34+02:00"</span><span class="p">,</span><span class="w">
                                </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                                    </span><span class="p">{</span><span class="w">
                                        </span><span class="nl">"jsonContent"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                                            </span><span class="nl">"embeddedJsonContent"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                                                </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                                                    </span><span class="nl">"messageId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr.health.ptfsas_44fce1e7-461e-4b15-91e2-b4168bed531e"</span><span class="p">,</span><span class="w">
                                                    </span><span class="nl">"sender"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                                                        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr.health.ptfsas"</span><span class="p">,</span><span class="w">
                                                        </span><span class="nl">"URI"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hubex:fr.health.ptfsas"</span><span class="w">
                                                    </span><span class="p">},</span><span class="w">
                                                    </span><span class="nl">"sentAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2025-10-28T17:29:59+01:00"</span><span class="p">,</span><span class="w">
                                                    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Actual"</span><span class="p">,</span><span class="w">
                                                    </span><span class="nl">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Report"</span><span class="p">,</span><span class="w">
                                                    </span><span class="nl">"recipient"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                                                        </span><span class="p">{</span><span class="w">
                                                            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr.health.samu330"</span><span class="p">,</span><span class="w">
                                                            </span><span class="nl">"URI"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hubex:fr.health.samu330"</span><span class="w">
                                                        </span><span class="p">}</span><span class="w">
                                                    </span><span class="p">],</span><span class="w">
                                                    </span><span class="nl">"appointment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                                                        </span><span class="nl">"appointmentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2d2db05f-e2b0-4169-be8f-891806da2c74"</span><span class="p">,</span><span class="w">
                                                        </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UpdateAppointment"</span><span class="p">,</span><span class="w">
                                                        </span><span class="nl">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2025-06-17T10:15:00+02:00"</span><span class="p">,</span><span class="w">
                                                        </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"booked"</span><span class="p">,</span><span class="w">
                                                        </span><span class="nl">"orientationCategory"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PS"</span><span class="p">,</span><span class="w">
                                                        </span><span class="nl">"start"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2025-06-17T14:00:00+02:00"</span><span class="p">,</span><span class="w">
                                                        </span><span class="nl">"end"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2025-06-17T14:20:00+02:00"</span><span class="p">,</span><span class="w">
                                                        </span><span class="nl">"practitioner"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                                                            </span><span class="nl">"rppsId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"810005681340"</span><span class="p">,</span><span class="w">
                                                            </span><span class="nl">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MOREL"</span><span class="p">,</span><span class="w">
                                                            </span><span class="nl">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Didier"</span><span class="p">,</span><span class="w">
                                                            </span><span class="nl">"specialityCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SM54"</span><span class="p">,</span><span class="w">
                                                            </span><span class="nl">"specialityUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://mos.esante.gouv.fr/NOS/TRE_R38-SpecialiteOrdinale/FHIR/TRE-R38-SpecialiteOrdinale"</span><span class="p">,</span><span class="w">
                                                            </span><span class="nl">"professionUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://mos.esante.gouv.fr/NOS/TRE_G15-ProfessionSante/FHIR/TRE-G15-ProfessionSante"</span><span class="p">,</span><span class="w">
                                                            </span><span class="nl">"professionCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="w">
                                                        </span><span class="p">}</span><span class="w">
                                                    </span><span class="p">}</span><span class="w">
                                                </span><span class="p">}</span><span class="w">
                                            </span><span class="p">}</span><span class="w">
                                        </span><span class="p">}</span><span class="w">
                                    </span><span class="p">}</span><span class="w">
                                </span><span class="p">]</span><span class="w">
                            </span><span class="p">},</span><span class="w">
                            </span><span class="nl">"referencedDistributionID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fr.health.ptfsas_44fce1e7-461e-4b15-91e2-b4168bed531e"</span><span class="w">
                        </span><span class="p">}</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h3 id="déclencheurs-et-règles-dintégration-attendues">Déclencheurs et règles d'intégration attendues</h3>

<p>Divers évènements dans la plateforme numérique SAS peuvent déclencher de manière instantanée le flux. À titre d’exemple, vous trouverez ci-dessous une liste non exhaustive de ces évènements :</p>

<ul>
  <li>Pour la création d’un message :
    <ul>
      <li>lors de la prise de RDV ou demande de prise en charge par le régulateur pour le compte du patient dans une solution éditeur</li>
      <li>lors de la prise de RDV par le régulateur pour le compte du patient dans la plateforme numérique SAS</li>
      <li>lors de la prise de RDV par le régulateur pour le compte du patient en surnuméraire</li>
    </ul>
  </li>
  <li>Pour la modification d’un message :
    <ul>
      <li>lors d’un changement de statut du RDV : confirmé, annulé, honoré et non honoré</li>
      <li>lors d’un changement du PS effecteur de soins (ex. remplacement) ou lorsque le PS n’a pas pu être identifié au préalable (ex. agendas de structure)</li>
      <li>lors d’un changement horaire du créneau</li>
    </ul>
  </li>
</ul>

<p><br/>
Le paragraphe ci-dessous détaille les différentes <strong>règles de gestions attendues</strong> par les éditeurs à la suite du déclenchement du flux et la transmission d’un message :</p>
<ul>
  <li>A la réception du message, <strong>la solution éditeur stockera l’identifiant technique SAS du RDV transmis</strong> pour référence et gestion des mises à jour éventuelles</li>
  <li>Il est attendu pour les éditeurs ayant implémenté le flux de <strong>mettre en place une écoute de leurs files de messages instantanément</strong> afin de permettra le rattachement du RDV avec le DRM par le régulateur à la suite de la transmission des informations de RDV</li>
  <li>Lorsque les données du RDV pris pour le compte du patient auront été transmises à la solution LRM, le régulateur OSNP devra pouvoir réaliser le rapprochement entre l’orientation et le DRM. Il est attendu que <strong>l’éditeur mette en place une solution pour que le régulateur puisse faire ce rapprochement au sein de la solution LRM</strong>. Par exemple, un tableau de bord, un espace pour la gestion des RDV pris, un affichage des données métier disponibles pour faciliter l’action (ex. nom du PS, , sélection DRM, heure de prise de RDV, heure du RDV, etc.), ou tout autre solution ergonomique que l’éditeur jugera pertinente. L’éditeur partagera à l’ANS la solution qu’il est prévu de mettre en place.</li>
  <li>Les règles d’association de l’orientation avec le DRM et la gestion des requêtes potentielles non associées seront gérées au cas par cas avec l’éditeur.</li>
  <li>Il est attendu de la part de l’éditeur de <strong>conserver un historique des messages reçus</strong> au niveau de l’échange et au niveau du résultat du traitement du message.</li>
</ul>



</div>
        </div>    <!-- /inner-wrapper -->
      </div>    <!-- /row -->
    </div>    <!-- /container -->
  </div>    <!-- /segment-content -->

  <script src="assets/js/jquery.js" type="text/javascript"> </script>       <!-- note keep space here, otherwise it will be transformed to empty tag -> fails -->
  <script src="assets/js/jquery-ui.min.js" type="text/javascript"> </script>

<script src="assets/js/window-hash.js" type="text/javascript"> </script>
  <a name="bottom"> </a>
  <div igtool="footer" id="segment-footer" class="segment">    <!-- segment-footer -->
    <div class="container">    <!-- container -->

      <div style="background-color:var(--footer-nav-bg-color)">
        <table style="width:100%">
          <tbody>
            <tr>
              <td style="text-align:left">&nbsp;

                <a href="specifications_techniques-sos-gestion_rdv.html">&lt;prev</a>

              </td>
              <td style="text-align:center">
                <a href="#top">top</a>
              </td>
              <td style="text-align:right">&nbsp;

                <a href="ressources_casusage.html">next&gt;</a>

              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="inner-wrapper">
        <p>
          IG &copy; 2020+ <a style="color:var(--footer-hyperlink-text-color)" href="https://esante.gouv.fr">ANS</a>.  Package ans.fhir.fr.sas#1.1.0 based on <a style="color: var(--footer-hyperlink-text-color)" href="http://hl7.org/fhir/R4/">FHIR 4.0.1</a>. Generated <span title="Fri, Nov 14, 2025 17:06+0000">2025-11-14</span>
          <br/>
          <span style="color: var(--footer-highlight-text-color)"></span>
            Liens : <a style="color: var(--footer-hyperlink-text-color)" href="toc.html">Table des matières</a> |
<a style="color: var(--footer-hyperlink-text-color)" href="qa.html">QA</a> |
<a style="color: var(--footer-hyperlink-text-color)" href="https://interop.esante.gouv.fr/ig/fhir/sas/history.html" target="_blank">Historique des versions</a>
<a style="color: var(--footer-hyperlink-text-color)" href="https://interop.esante.gouv.fr/ig/documentation" target="_blank">Documentation</a>
 | <a style="color: var(--footer-hyperlink-text-color)" href="https://github.com/ansforge/IG-fhir-service-acces-aux-soins/issues/new" target="_blank">New Issue</a>

          
        </p>
      </div>    <!-- /inner-wrapper -->
    </div>    <!-- /container -->
  </div>    <!-- /segment-footer -->
  
  <div id="segment-post-footer" class="segment hidden">    <!-- segment-post-footer -->
    <div class="container">    <!-- container -->
    </div>    <!-- /container -->
  </div>    <!-- /segment-post-footer -->
  
    <!-- JS and analytics only. -->
    <!-- Bootstrap core JavaScript
  ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
  <script src="assets/js/bootstrap.min.js" type="text/javascript"> </script>
  <script src="assets/js/respond.min.js" type="text/javascript"> </script>
  <script src="assets/js/anchor.min.js" type="text/javascript"> </script>
  <script src="assets/js/clipboard.min.js" type="text/javascript"> </script>
  <script src="assets/js/clipboard-btn.js" type="text/javascript"> </script>

    <!-- Ajout ANS -->
  <script src="assets/js/app.js" type="text/javascript"> </script>
  <script src="assets/js/vendor.js" type="text/javascript"> </script>
    <!-- Fin ajout ANS -->

  <script src="assets/js/anchor-hover.js" type="text/javascript"> </script>
  

    <!-- Analytics Below
  ================================================== -->


    <!-- AJOUT ANS -->

<footer role="contentinfo" class="footer footer-principal">
  <div class="footer__region1">
    <div class="container">
      <div class="row">

        <div class="col-md-6 col-lg-4 text-center text-md-left">
          <div class="logos">        
            <div class="logo logo--0">
              <a rel="nofollow" href="https://solidarites-sante.gouv.fr" title="Ministère des Solidarités et de la Santé (nouvelle fenêtre)" target="_blank">
                
                <img src="assets/images/logo-ministere.svg" alt="Ministère des Solidarités et de la Santé" width="133" loading="lazy" height="77"/>
                
              </a>
            </div>
        
            <div class="logo logo--1">
              <a rel="nofollow" href="https://esante.gouv.fr/" title="Agence du numérique en santé (nouvelle fenêtre)" target="_blank">
                
                <img src="assets/images/logo-ANS-footer.svg" alt="Agence du numérique en santé" width="106" loading="lazy" height="74"/>
              </a>
            </div>
          </div>
        </div>
        
        <div class="col-md-6 col-lg-4 text-center text-md-left">
          <p class="footer__title">Agence du Numérique en Santé</p>
          <p>2-10 Rue d'Oradour-sur-Glane 75015 Paris</p>

            <!-- <div class="m-social">
            <ul class="m-social__list">        
              <li class="m-social__item">
                <a class="m-social__link" href="https://www.linkedin.com/company/agence-du-numerique-en-sante/" target="_blank" rel="nofollow">
                  <div class="m-social__icon">
                    <svg class="svg-icon svg-linkedin" aria-hidden="true" focusable="false"><use href="assets/images/icon-sprite.svg#linkedin"></use></svg>
                  </div>
                  <span class="sr-only">linkedin</span>
                </a>
              </li>
              <li class="m-social__item">
                <a class="m-social__link" href="https://twitter.com/esante_gouv_fr" target="_blank" rel="nofollow">
                  <div class="m-social__icon">
                    <svg class="svg-icon svg-twitter" aria-hidden="true" focusable="false"><use href="assets/images/icon-sprite.svg#twitter"></use></svg>
                  </div>
                  <span class="sr-only">twitter</span>
                </a>
              </li>
              <li class="m-social__item">
                <a class="m-social__link" href="https://www.youtube.com/channel/UCd1zuSaU5cE1lRCpwv_HSMA" target="_blank" rel="nofollow">
                  <div class="m-social__icon">
                    <svg class="svg-icon svg-youtube" aria-hidden="true" focusable="false"><use href="assets/images/icon-sprite.svg#youtube"></use></svg>
                  </div>
                  <span class="sr-only">youtube</span>
                </a>
              </li>
              <li class="m-social__item">
                <a class="m-social__link" href="https://esante.gouv.fr/rss.xml" target="_blank" rel="nofollow">
                  <div class="m-social__icon">
                    <svg class="svg-icon svg-rss" aria-hidden="true" focusable="false"><use href="assets/images/icon-sprite.svg#rss"></use></svg>
                  </div>
                  <span class="sr-only">rss</span>
                </a>
              </li>
            </ul>
          </div> -->
        </div>
        
        <div class="col-6 col-lg-4">
          <ul class="footer-list">
            <li class="footer-list__item footer-list__item--hasIcon">
              <a href="mailto:ci-sis@esante.gouv.fr" class="mailto-link">
                <svg aria-hidden="true" focusable="false" class="svg-icon svg-angle-right"><use href="assets/images/icon-sprite.svg#angle-right"></use></svg>Contact</a>
              </li>
                <!-- <li class="footer-list__item">
                <a href="https://interop-pprod.esante.gouv.fr/ci-sis-specifications/wp-content/uploads/CGU_espace_de_tests_v1.1.pdf" class="file-link">Mentions légales</a>
              </li> -->
            </ul>
          </div>

        </div>
      </div>
    </div>
    
      <!-- <div class="footer__region2">
      <div class="container">
        <div class="footer-contentinfo">
          <ul class="footer-list footer-list--inline">

          </ul>
        </div>
      </div>
    </div> -->
  </footer>
  </body>
</html>
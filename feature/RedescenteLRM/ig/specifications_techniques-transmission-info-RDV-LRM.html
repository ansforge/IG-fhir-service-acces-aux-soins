<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE HTML>
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>Transmission des informations de rendez-vous aux LRM - Service d'Accès aux Soins v1.1.0</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="author" content="http://hl7.org/fhir"/>

    <link rel="stylesheet" href="fhir.css"/>

      <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="assets/css/bootstrap-fhir.css"/>

      <!-- Project extras -->
    <link rel="stylesheet" href="assets/css/project.css"/>
    <link rel="stylesheet" href="assets/css/pygments-manni.css"/>
    <link rel="stylesheet" href="assets/css/jquery-ui.css"/>
  	<link rel="stylesheet" href="assets/css/prism.css"/>
    <link rel="stylesheet" href="assets/css/style-ans.css"/>
    <link rel="stylesheet" href="assets/css/style-add-ans.css"/>
      <!-- Placeholder for child template CSS declarations -->

    <script src="fhir-table-scripts.js" type="text/javascript"> </script>

      <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
      <!-- [if lt IE 9]>
    <script src="assets/js/html5shiv.js"></script>
    <script src="assets/js/respond.min.js"></script>
    <![endif] -->

      <!-- Favicons -->
    <link sizes="144x144" rel="fhir-logo" href="assets/ico/icon-fhir-144.png"/>
    <link sizes="114x114" rel="fhir-logo" href="assets/ico/icon-fhir-114.png"/>
    <link sizes="72x72" rel="fhir-logo" href="assets/ico/icon-fhir-72.png"/>
    <link rel="fhir-logo" href="assets/ico/icon-fhir-57.png"/>
    <link rel="shortcut icon" href="assets/ico/favicon.png"/>
  </head>
  <body onload="document.body.style.opacity='1'">

	  <script src="assets/js/prism.js"></script>
    <script src="assets/js/mermaid.js" type="text/javascript"></script>
    <script src="assets/js/mermaid-init.js" type="text/javascript"></script>
    <style type="text/css">h2{--heading-prefix:"12"}
    h3,h4,h5,h6{--heading-prefix:"12"}</style>
    <div id="segment-header" class="segment">    <!-- segment-header -->
      <div class="container">    <!-- container -->
          <!-- Placeholder for child template header declarations -->
<div id="family-nav">
    <a id="hl7-search-lnk" href="http://hl7.org/fhir" data-no-external="true"><img src="assets/images/fhir-logo-www.png" alt="Visit the FHIR website" height="50"/> </a>
  </div>
  <div style="line-height: 50px; float: left; margin-top: 4px; margin-bottom: 8px; color: #808080; " id="ans-nav">
    <a id="hl7-logo" href="https://esante.gouv.fr/" data-no-external="true"><img src="assets/images/logo-ANS.svg" alt="ANS Logo" height="50"/></a>
    <a id="hl7-search-lnk" href="searchform.html" data-no-external="true"><img src="assets/images/search.png" alt="Search FHIR"/></a>
  </div>

  <div id="ig-search">
 </div>


        <div id="ig-status">
          <p><span style="font-size:12pt;font-weight:bold">Service d'Accès aux Soins</span>
            <br/>
            <span style="display:inline-block;">1.1.0 - ci-build



  <img src="assets/images/fra.svg" alt="France flag" title="France" height="16"/>


            </span>
          </p>
        </div>
      </div>   <!-- /container -->
    </div>    <!-- /segment-header -->

    <div id="segment-navbar" class="segment">    <!-- segment-navbar -->
      <div id="stripe"> </div>
      <div class="container">    <!-- container -->
          <!-- HEADER CONTENT -->

        <nav class="navbar navbar-inverse">
            <!-- status-bar -->
          <div class="container">
            <button data-target=".navbar-inverse-collapse" data-toggle="collapse" type="button" class="navbar-toggle">
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
            </button>
            <a href="http://hl7.org/fhir/R4/index.html" class="navbar-brand hidden">FHIR</a>
            <div class="nav-collapse collapse navbar-inverse-collapse">
                <!-- menu.xml -->

<ul class="nav navbar-nav">
  <li>
    <a href="index.html">Accueil</a>
  </li>
  <li>
    <a href="specifications_fonctionnelles.html">Spécif. fonctionnelles</a>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Spécif. techniques
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        ________ PS indiv. ________
      </li>
      <li>
        <a href="specifications_techniques-ps-recherche_creneaux.html">PS indiv. - Recherche des créneaux</a>
      </li>
      <li>
        <a href="specifications_techniques-ps-gestion_regulateur.html">PS indiv. - Gestion des comptes régulateurs</a>
      </li>
      <li>
        <a href="specifications_techniques-ps-gestion_rdv.html">PS indiv. - Gestion de rendez-vous</a>
      </li>
      <li>
        _________ CPTS _________
      </li>
      <li>
        <a href="specifications_techniques-cpts-recherche_creneaux.html">CPTS - Recherche des créneaux</a>
      </li>
      <li>
        <a href="specifications_techniques-cpts-gestion_regulateur.html">CPTS - Gestion des comptes régulateurs</a>
      </li>
      <li>
        <a href="specifications_techniques-cpts-gestion_rdv.html">CPTS - Gestion de rendez-vous</a>
      </li>
      <li>
        ________ SOS Médecins ________
      </li>
      <li>
        <a href="specifications_techniques-sos-recherche_creneaux.html">SOS Médecins - Recherche des créneaux</a>
      </li>
      <li>
        <a href="specifications_techniques-sos-gestion_regulateur.html">SOS Médecins - Gestion des comptes régulateurs</a>
      </li>
      <li>
        <a href="specifications_techniques-sos-gestion_rdv.html">SOS Médecins - Gestion de rendez-vous</a>
      </li>
      <li>
        ________ Fluidification parcours régulateur ________
      </li>
      <li>
        <a href="specifications_techniques-transmission-info-RDV-LRM.html">Transmission des informations de rendez-vous aux LRM</a>
      </li>
    </ul>
  </li>
  <li>
    <a href="ressources_casusage.html">Ressources par cas d'usage</a>
  </li>
  <li>
    <a href="artifacts.html">Ressources de conformité</a>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Autres ressources
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="securite.html">Sécurité</a>
      </li>
      <li>
        <a href="faq.html">FAQ</a>
      </li>
      <li>
        <a href="annexes.html">Annexes</a>
      </li>
      <li>
        <a href="downloads.html">Téléchargements et usage</a>
      </li>
      <li>
        <a href="http://hl7.org/fhir/R4/index.html" target="_blank">Spécifications FHIR</a>
      </li>
      <li>
        <a href="https://esante.gouv.fr/" target="_blank">Site de l'ANS</a>
      </li>
    </ul>
  </li>
  <li>
    <a href="https://interop.esante.gouv.fr/ig/documentation/" target="_blank">Documentation</a>
  </li>
</ul>
            </div>    <!-- /.nav-collapse -->
          </div>    <!-- /.container -->
        </nav>    <!-- /.navbar -->
        <!-- /HEADER CONTENT -->
      </div>    <!-- /container -->
    </div>    <!-- /segment-navbar -->
      <!-- status-bar -->

    <div id="segment-breadcrumb" class="segment">    <!-- segment-breadcrumb -->
      <div class="container">    <!-- container -->
        <ul class="breadcrumb">
          <li><a href="toc.html"><b>Table of Contents</b></a></li><li><b>Transmission des informations de rendez-vous aux LRM</b></li>

          <span style="float:right;">

            <a href="specifications_techniques-sos-gestion_rdv.html">&lt;prev</a> | 

            <a href="#bottom">bottom</a>

          | <a href="ressources_casusage.html">next&gt;</a>

          </span>

        </ul>
      </div>    <!-- /container -->
    </div>    <!-- /segment-breadcrumb -->

    <a name="top"> </a>
    <div id="segment-content" class="segment">    <!-- segment-content -->
      <div class="container">    <!-- container -->
        <div class="row">
          <div class="inner-wrapper">

<style type="text/css">
h2:before{color:silver;counter-increment:section;content:var(--heading-prefix) " ";}
h3:before{color:silver;counter-increment:sub-section;content:var(--heading-prefix) "." counter(sub-section) " ";}
h4:before{color:silver;counter-increment:composite;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) " ";}
h5:before{color:silver;counter-increment:detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) " ";}
h6:before{color:silver;counter-increment:more-detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) "." counter(more-detail)" ";}
</style>
<div class="col-12">
    <!-- ReleaseHeader --><p id="publish-box">Service d'Accès aux Soins - Local Development build (v1.1.0) built by the FHIR (HL7&reg; FHIR&reg; Standard) Build Tools. See the <a href="https://interop.esante.gouv.fr/ig/fhir/sas/history.html">Directory of published versions</a></p>  <!-- EndReleaseHeader -->
  <h2>Transmission des informations de rendez-vous aux LRM</h2>
  












    <p>  <!-- white space is critical inside of capture --></p>
<div class="markdown-toc">
<ul id="markdown-toc">
  <li><a href="#détail-des-échanges" id="markdown-toc-détail-des-échanges">Détail des échanges</a></li>
  <li><a href="#message-denvoi-de-rdv" id="markdown-toc-message-denvoi-de-rdv">Message d'envoi de RDV</a></li>
  <li><a href="#message-de-modification-de-rdv" id="markdown-toc-message-de-modification-de-rdv">Message de modification de RDV</a></li>
  <li><a href="#message-dannulation-de-rdv" id="markdown-toc-message-dannulation-de-rdv">Message d'annulation de RDV</a></li>
  <li><a href="#nomenclatures" id="markdown-toc-nomenclatures">Nomenclatures</a></li>
  <li><a href="#déclencheurs-et-règles-dintégration-attendues" id="markdown-toc-déclencheurs-et-règles-dintégration-attendues">Déclencheurs et règles d'intégration attendues</a></li>
</ul>

</div>
<p>Les échanges avec les éditeurs de LRM se font au travers d'une liaison avec le Hub Santé.
La plateforme numérique du SAS, ainsi que les éditeurs de LRM sont raccordés au Hub.</p>

<p>Le schéma ci-dessous illustre l'échange de données entre la PTF SAS et les éditeurs de LRM</p>

<div style="width:100%;" align="center" class="figure">
    <p><svg xmlns="http://www.w3.org/2000/svg" contentStyleType="text/css" viewBox="0 0 965 93" zoomAndPan="magnify" data-diagram-type="DESCRIPTION" preserveAspectRatio="none" width="965px" xmlns:xlink="http://www.w3.org/1999/xlink" style="width:965px;height:93px;background:#FFFFFF;" version="1.1" height="93px"><defs></defs><g>  <!-- entity R --><g data-entity="R" id="entity_R" data-uid="ent0002" class="entity" data-source-line="3"><ellipse cx="44.6504" cy="20.0659" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1"></ellipse><path d="M44.6504,28.0659 L44.6504,55.0659 M31.6504,36.0659 L57.6504,36.0659 M44.6504,55.0659 L31.6504,70.0659 M44.6504,55.0659 L57.6504,70.0659" style="stroke:#181818;stroke-width:0.5;" fill="none"></path><text lengthAdjust="spacing" x="6" font-size="14" textLength="77.3008" y="84.561" font-family="sans-serif" fill="#000000">Régulateur</text></g>  <!-- entity db --><g data-entity="db" id="entity_db" data-uid="ent0003" class="entity" data-source-line="4"><path d="M225,37.0659 C225,27.0659 267.4126,27.0659 267.4126,27.0659 C267.4126,27.0659 309.8252,27.0659 309.8252,37.0659 L309.8252,62.3628 C309.8252,72.3628 267.4126,72.3628 267.4126,72.3628 C267.4126,72.3628 225,72.3628 225,62.3628 L225,37.0659" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1"></path><path d="M225,37.0659 C225,47.0659 267.4126,47.0659 267.4126,47.0659 C267.4126,47.0659 309.8252,47.0659 309.8252,37.0659" style="stroke:#181818;stroke-width:0.5;" fill="none"></path><text lengthAdjust="spacing" x="235" font-size="14" textLength="64.8252" y="64.061" font-family="sans-serif" fill="#000000">Stockage</text></g>  <!-- entity PTF --><g data-entity="PTF" id="entity_PTF" data-uid="ent0004" class="entity" data-source-line="5"><rect rx="2.5" ry="2.5" width="128.3154" x="345.5" y="31.5659" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="36.2969"></rect><text lengthAdjust="spacing" x="355.5" font-size="14" textLength="108.3154" y="54.561" font-family="sans-serif" fill="#000000">Plateforme SAS</text></g>  <!-- entity Hub --><g data-entity="Hub" id="entity_Hub" data-uid="ent0005" class="entity" data-source-line="6"><path d="M650,36.5659 L733.1787,36.5659 C738.1787,36.5659 738.1787,49.7144 738.1787,49.7144 C738.1787,49.7144 738.1787,62.8628 733.1787,62.8628 L650,62.8628 C645,62.8628 645,49.7144 645,49.7144 C645,49.7144 645,36.5659 650,36.5659" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1"></path><path d="M733.1787,36.5659 C728.1787,36.5659 728.1787,49.7144 728.1787,49.7144 C728.1787,62.8628 733.1787,62.8628 733.1787,62.8628" style="stroke:#181818;stroke-width:0.5;" fill="none"></path><text lengthAdjust="spacing" x="650" font-size="14" textLength="73.1787" y="54.561" font-family="sans-serif" fill="#000000">Hub Santé</text></g>  <!-- entity LRM --><g data-entity="LRM" id="entity_LRM" data-uid="ent0006" class="entity" data-source-line="7"><rect rx="2.5" ry="2.5" width="49.6064" x="909.5" y="31.5659" style="stroke:#181818;stroke-width:0.5;" fill="#F1F1F1" height="36.2969"></rect><text lengthAdjust="spacing" x="919.5" font-size="14" textLength="29.6064" y="54.561" font-family="sans-serif" fill="#000000">LRM</text></g>  <!-- link R to db --><g data-entity-2="db" data-entity-1="R" id="link_R_db" data-uid="lnk7" class="link" data-source-line="9"><path d="M83.09,49.5659 C122.61,49.5659 177.88,49.5659 218.82,49.5659" style="stroke:#181818;stroke-width:1;" id="R-to-db" fill="none"></path><polygon style="stroke:#181818;stroke-width:1;" fill="#181818" points="224.82,49.5659,215.82,45.5659,219.82,49.5659,215.82,53.5659,224.82,49.5659"></polygon><text lengthAdjust="spacing" x="101.5" font-size="13" textLength="100.8706" y="27.6328" font-family="sans-serif" fill="#000000">Enregistrement</text><text lengthAdjust="spacing" x="120.5112" font-size="13" textLength="71.1128" y="42.7656" font-family="sans-serif" fill="#000000">orientation</text></g>  <!-- link db to PTF --><g data-entity-2="PTF" data-entity-1="db" id="link_db_PTF" data-uid="lnk8" class="link" data-source-line="10"><path d="M310.21,49.5659 C321.85,49.5659 327.48,49.5659 339.12,49.5659" style="stroke:#181818;stroke-width:1;" id="db-to-PTF" fill="none"></path><polygon style="stroke:#181818;stroke-width:1;" fill="#181818" points="345.12,49.5659,336.12,45.5659,340.12,49.5659,336.12,53.5659,345.12,49.5659"></polygon></g>  <!-- link PTF to Hub --><g data-entity-2="Hub" data-entity-1="PTF" id="link_PTF_Hub" data-uid="lnk9" class="link" data-source-line="11"><path d="M473.84,49.5659 C525.86,49.5659 591.88,49.5659 638.58,49.5659" style="stroke:#181818;stroke-width:1;" id="PTF-to-Hub" fill="none"></path><polygon style="stroke:#181818;stroke-width:1;" fill="#181818" points="644.58,49.5659,635.58,45.5659,639.58,49.5659,635.58,53.5659,644.58,49.5659"></polygon><text lengthAdjust="spacing" x="491.75" font-size="13" textLength="135.2813" y="42.6328" font-family="sans-serif" fill="#000000">Transmission Bundle</text></g>  <!-- link Hub to PTF --><g data-entity-2="PTF" data-entity-1="Hub" id="link_Hub_PTF" data-uid="lnk13" class="link" data-source-line="15"><path d="M656.55,36.5059 C647.31,33.6359 637.27,31.0259 627.75,29.5659 C597.66,24.9559 520.97,25.8959 490.75,29.5659 C485.13,30.2459 485.2246,30.0661 479.4346,31.1661" style="stroke:#0000FF;stroke-width:1;" id="Hub-to-PTF" fill="none"></path><polygon style="stroke:#0000FF;stroke-width:1;" fill="#0000FF" points="473.54,32.2859,483.1284,34.5358,478.4521,31.3527,481.6353,26.6764,473.54,32.2859"></polygon><text lengthAdjust="spacing" x="546.25" font-size="13" textLength="26.4951" y="19.6328" font-family="sans-serif" fill="#0000FF">ACK</text></g>  <!-- link Hub to PTF --><g data-entity-2="PTF" data-entity-1="Hub" id="link_Hub_PTF" data-uid="lnk14" class="link" data-source-line="16"><path d="M644.82,60.1659 C625.96,63.9359 603.93,67.7059 583.75,69.5659 C547.21,72.9259 512.3799,69.673 479.4799,64.243" style="stroke:#FF0000;stroke-width:1;" id="Hub-to-PTF-1" fill="none"></path><polygon style="stroke:#FF0000;stroke-width:1;" fill="#FF0000" points="473.56,63.2659,481.7885,68.6781,478.4933,64.0801,483.0912,60.7849,473.56,63.2659"></polygon><text lengthAdjust="spacing" x="535.75" font-size="13" textLength="47.2583" y="65.6328" font-family="sans-serif" fill="#FF0000">Erreurs</text></g>  <!-- link Hub to LRM --><g data-entity-2="LRM" data-entity-1="Hub" id="link_Hub_LRM" data-uid="lnk10" class="link" data-source-line="12"><path d="M738.07,49.5659 C789.06,49.5659 862.93,49.5659 903.32,49.5659" style="stroke:#181818;stroke-width:1;" id="Hub-to-LRM" fill="none"></path><polygon style="stroke:#181818;stroke-width:1;" fill="#181818" points="909.32,49.5659,900.32,45.5659,904.32,49.5659,900.32,53.5659,909.32,49.5659"></polygon><text lengthAdjust="spacing" x="756.25" font-size="13" textLength="135.2813" y="42.6328" font-family="sans-serif" fill="#000000">Transmission Bundle</text></g>  <!-- link LRM to Hub --><g data-entity-2="Hub" data-entity-1="LRM" id="link_LRM_Hub" data-uid="lnk11" class="link" data-source-line="13"><path d="M909.23,35.4059 C903.79,32.9859 897.95,30.8459 892.25,29.5659 C862.55,22.8859 785.34,24.9559 755.25,29.5659 C745.73,31.0259 741.42,31.8562 732.18,34.7262" style="stroke:#0000FF;stroke-width:1;" id="LRM-to-Hub" fill="none"></path><polygon style="stroke:#0000FF;stroke-width:1;" fill="#0000FF" points="726.45,36.5059,736.2314,37.6563,731.225,35.0228,733.8584,30.0163,726.45,36.5059"></polygon><text lengthAdjust="spacing" x="810.75" font-size="13" textLength="26.4951" y="19.6328" font-family="sans-serif" fill="#0000FF">ACK</text></g>  <!-- link LRM to Hub --><g data-entity-2="Hub" data-entity-1="LRM" id="link_LRM_Hub" data-uid="lnk12" class="link" data-source-line="14"><path d="M909.48,56.9659 C892.4,61.6159 869.17,67.1759 848.25,69.5659 C811.18,73.8059 775.1347,69.1157 743.9747,62.6457" style="stroke:#FF0000;stroke-width:1;" id="LRM-to-Hub-1" fill="none"></path><polygon style="stroke:#FF0000;stroke-width:1;" fill="#FF0000" points="738.1,61.4259,746.0988,67.1721,742.9956,62.4424,747.7253,59.3392,738.1,61.4259"></polygon><text lengthAdjust="spacing" x="800.25" font-size="13" textLength="47.2583" y="65.6328" font-family="sans-serif" fill="#FF0000">Erreurs</text></g></g></svg></p>
</div>

<p>Le protocole utilisé pour la connexion des applications (PTF SAS et éditeurs de LRM) avec le Hub est le protocole AMQP, en vesion 0-9-1.</p>

<p>Les messages seront transmis au format json sous la forme d'une ressource FHIR Bundle de type transaction contenant les différentes ressources / données permettant aux LRM de traiter le message.</p>

<p>Ils seront transmis avec une entête permettant notamment au Hub de router le message vers le bon SAS de destination.</p>

<p>Chaque client dispose de 3 files d’écoute selon la typologie des messages reçus :</p>
<ul>
  <li>« message » pour les échanges fonctionnels</li>
  <li>« ack » pour les acquittements de réception finale</li>
  <li>« info » pour les messages généraux d’informations, alertes et erreurs</li>
</ul>

<p>La structuration du nom des files est {&#x1D456;&#x1D451;&#x1D452;&#x1D45B;&#x1D461;&#x1D456;&#x1D453;&#x1D456;&#x1D44E;&#x1D45B;&#x1D461;&#x1D436;&#x1D459;&#x1D456;&#x1D452;&#x1D45B;&#x1D461;}.{&#x1D461;&#x1D466;&#x1D45D;&#x1D45C;&#x1D459;&#x1D45C;&#x1D454;&#x1D456;&#x1D452;} donnant, par exemple, <em>fr.health.samu001.message</em></p>

<p>En l'occurence, les LRM écouteront sur leur file « message » et la plateforme SAS écoutera sur les files "ack" et "info".</p>

<p>Le schéma ci-dessous détaille cette cinématique d'échange entre les différents acteurs</p>

<div style="width:100%;" align="center" class="figure">
    <p><svg xmlns="http://www.w3.org/2000/svg" contentStyleType="text/css" viewBox="0 0 586 455" zoomAndPan="magnify" data-diagram-type="SEQUENCE" preserveAspectRatio="none" width="586px" xmlns:xlink="http://www.w3.org/1999/xlink" style="width:586px;height:455px;background:#FFFFFF;" version="1.1" height="455px"><defs></defs><g><g><title>Client B</title><rect width="8" x="35.2925" y="52.5938" fill="#000000" fill-opacity="0.00000" height="395.7266"></rect><line y1="52.5938" x1="39" y2="448.3203" style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x2="39"></line></g><g><title>Hub Santé</title><rect width="8" x="264.2646" y="52.5938" fill="#000000" fill-opacity="0.00000" height="395.7266"></rect><line y1="52.5938" x1="267.6753" y2="448.3203" style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x2="267.6753"></line></g><g><title>Client A</title><rect width="8" x="535.728" y="52.5938" fill="#000000" fill-opacity="0.00000" height="395.7266"></rect><line y1="52.5938" x1="538.8423" y2="448.3203" style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x2="538.8423"></line></g><g data-participant="LRM" class="participant participant-head"><rect rx="2.5" ry="2.5" width="68.585" x="5" y="5" style="stroke:#181818;stroke-width:0.5;" fill="#E2E2F0" height="46.5938"></rect><text lengthAdjust="spacing" x="12" font-size="14" textLength="54.585" y="24.9951" font-family="sans-serif" fill="#000000">Client B</text><text lengthAdjust="spacing" x="19.0273" font-size="14" textLength="40.5303" y="41.292" font-family="sans-serif" fill="#000000">(LRM)</text></g><g data-participant="Hub" class="participant participant-head"><rect rx="2.5" ry="2.5" width="87.1787" x="224.6753" y="5" style="stroke:#181818;stroke-width:0.5;" fill="#E2E2F0" height="46.5938"></rect><text lengthAdjust="spacing" x="231.6753" font-size="14" textLength="73.1787" y="24.9951" font-family="sans-serif" fill="#000000">Hub Santé</text><text lengthAdjust="spacing" x="266.0396" font-size="14" textLength="4.4502" y="41.292" font-family="sans-serif" fill="#000000">&nbsp;</text></g><g data-participant="PTF" class="participant participant-head"><rect rx="2.5" ry="2.5" width="81.7715" x="498.8423" y="5" style="stroke:#181818;stroke-width:0.5;" fill="#E2E2F0" height="46.5938"></rect><text lengthAdjust="spacing" x="512.4492" font-size="14" textLength="54.5576" y="24.9951" font-family="sans-serif" fill="#000000">Client A</text><text lengthAdjust="spacing" x="505.8423" font-size="14" textLength="67.7715" y="41.292" font-family="sans-serif" fill="#000000">(PTF SAS)</text></g><g data-participant-1="PTF" data-participant-2="Hub" class="message"><polygon style="stroke:#181818;stroke-width:1;" fill="#181818" points="279.2646,79.7266,269.2646,83.7266,279.2646,87.7266,275.2646,83.7266"></polygon><line y1="83.7266" x1="273.2646" y2="83.7266" style="stroke:#181818;stroke-width:1;" x2="538.728"></line><text lengthAdjust="spacing" x="285.2646" font-size="13" textLength="212.2275" y="78.6606" font-family="sans-serif" fill="#000000">1. Envoi du message fonctionnel</text></g><g data-participant-1="Hub" data-participant-2="PTF" class="message"><polygon style="stroke:#181818;stroke-width:1;" fill="#181818" points="527.728,108.8594,537.728,112.8594,527.728,116.8594,531.728,112.8594"></polygon><line y1="112.8594" x1="268.2646" y2="112.8594" style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x2="533.728"></line><text lengthAdjust="spacing" x="275.2646" font-size="13" textLength="173.8242" y="107.7935" font-family="sans-serif" fill="#000000">2. Acquittement technique</text></g><g data-participant-1="Hub" data-participant-2="Hub" class="message"><line y1="141.9922" x1="268.2646" y2="141.9922" style="stroke:#181818;stroke-width:1;" x2="310.2646"></line><line y1="141.9922" x1="310.2646" y2="154.9922" style="stroke:#181818;stroke-width:1;" x2="310.2646"></line><line y1="154.9922" x1="269.2646" y2="154.9922" style="stroke:#181818;stroke-width:1;" x2="310.2646"></line><polygon style="stroke:#181818;stroke-width:1;" fill="#181818" points="279.2646,150.9922,269.2646,154.9922,279.2646,158.9922,275.2646,154.9922"></polygon><text lengthAdjust="spacing" x="275.2646" font-size="13" textLength="243.5215" y="136.9263" font-family="sans-serif" fill="#000000">2.1 Inscription dans la file B.message</text></g><g data-participant-1="Hub" data-participant-2="LRM" class="message"><polygon style="stroke:#181818;stroke-width:1;" fill="#181818" points="50.2925,195.2578,40.2925,199.2578,50.2925,203.2578,46.2925,199.2578"></polygon><line y1="199.2578" x1="44.2925" y2="199.2578" style="stroke:#181818;stroke-width:1;" x2="267.2646"></line><text lengthAdjust="spacing" x="56.2925" font-size="13" textLength="185.6055" y="179.0591" font-family="sans-serif" fill="#000000">3. Transmission du message</text><text lengthAdjust="spacing" x="56.2925" font-size="13" textLength="98.2935" y="194.1919" font-family="sans-serif" fill="#000000">au destinataire</text></g><g data-participant-1="LRM" data-participant-2="Hub" class="message"><polygon style="stroke:#181818;stroke-width:1;" fill="#181818" points="256.2646,224.3906,266.2646,228.3906,256.2646,232.3906,260.2646,228.3906"></polygon><line y1="228.3906" x1="39.2925" y2="228.3906" style="stroke:#181818;stroke-width:1;" x2="262.2646"></line><text lengthAdjust="spacing" x="46.2925" font-size="13" textLength="137.0078" y="223.3247" font-family="sans-serif" fill="#000000">4. Acquittement final</text></g><g data-participant-1="Hub" data-participant-2="Hub" class="message"><line y1="257.5234" x1="268.2646" y2="257.5234" style="stroke:#181818;stroke-width:1;" x2="310.2646"></line><line y1="257.5234" x1="310.2646" y2="270.5234" style="stroke:#181818;stroke-width:1;" x2="310.2646"></line><line y1="270.5234" x1="269.2646" y2="270.5234" style="stroke:#181818;stroke-width:1;" x2="310.2646"></line><polygon style="stroke:#181818;stroke-width:1;" fill="#181818" points="279.2646,266.5234,269.2646,270.5234,279.2646,274.5234,275.2646,270.5234"></polygon><text lengthAdjust="spacing" x="275.2646" font-size="13" textLength="207.7144" y="252.4575" font-family="sans-serif" fill="#000000">4.1 Inscription dans la file A.ack</text></g><g data-participant-1="Hub" data-participant-2="PTF" class="message"><polygon style="stroke:#181818;stroke-width:1;" fill="#181818" points="527.728,310.7891,537.728,314.7891,527.728,318.7891,531.728,314.7891"></polygon><line y1="314.7891" x1="268.2646" y2="314.7891" style="stroke:#181818;stroke-width:1;" x2="533.728"></line><text lengthAdjust="spacing" x="275.2646" font-size="13" textLength="223.0313" y="294.5903" font-family="sans-serif" fill="#000000">4.2 Tranmission de l'acquittement</text><text lengthAdjust="spacing" x="275.2646" font-size="13" textLength="98.2935" y="309.7231" font-family="sans-serif" fill="#000000">au destinataire</text></g><g data-participant-1="LRM" data-participant-2="Hub" class="message"><polygon style="stroke:#181818;stroke-width:1;" fill="#181818" points="256.2646,339.9219,266.2646,343.9219,256.2646,347.9219,260.2646,343.9219"></polygon><line y1="343.9219" x1="39.2925" y2="343.9219" style="stroke:#181818;stroke-width:1;" x2="262.2646"></line><text lengthAdjust="spacing" x="46.2925" font-size="13" textLength="204.9722" y="338.856" font-family="sans-serif" fill="#000000">5. Message d'erreur (optionnel)</text></g><g data-participant-1="Hub" data-participant-2="Hub" class="message"><line y1="373.0547" x1="268.2646" y2="373.0547" style="stroke:#181818;stroke-width:1;" x2="310.2646"></line><line y1="373.0547" x1="310.2646" y2="386.0547" style="stroke:#181818;stroke-width:1;" x2="310.2646"></line><line y1="386.0547" x1="269.2646" y2="386.0547" style="stroke:#181818;stroke-width:1;" x2="310.2646"></line><polygon style="stroke:#181818;stroke-width:1;" fill="#181818" points="279.2646,382.0547,269.2646,386.0547,279.2646,390.0547,275.2646,386.0547"></polygon><text lengthAdjust="spacing" x="275.2646" font-size="13" textLength="209.4536" y="367.9888" font-family="sans-serif" fill="#000000">5.1 Inscription dans la file A.info</text></g><g data-participant-1="Hub" data-participant-2="PTF" class="message"><polygon style="stroke:#181818;stroke-width:1;" fill="#181818" points="527.728,426.3203,537.728,430.3203,527.728,434.3203,531.728,430.3203"></polygon><line y1="430.3203" x1="268.2646" y2="430.3203" style="stroke:#181818;stroke-width:1;" x2="533.728"></line><text lengthAdjust="spacing" x="275.2646" font-size="13" textLength="243.3311" y="410.1216" font-family="sans-serif" fill="#000000">5.2 Tranmission du message d'erreur</text><text lengthAdjust="spacing" x="275.2646" font-size="13" textLength="98.2935" y="425.2544" font-family="sans-serif" fill="#000000">au destinataire</text></g></g></svg></p>
</div>

<h3 id="détail-des-échanges">Détail des échanges</h3>

<h4 id="gestion-de-lenvoi-dun-message-de-la-ptf-sas---hub">Gestion de l'envoi d'un message de la PTF SAS -&gt; Hub</h4>

<p>Les champs ci-dessous correspondent à l’en-tête du message qui porte les informations de RDV pris par le régulateur pour le compte du patient. Ce message est envoyé instantanément de la plateforme SAS au HubSanté. 
L'entête est de type "EDXL-DE", cf. spécifications du Hub Santé.</p>

<table>
  <thead>
    <tr>
      <th>Élément</th>
      <th>Champ</th>
      <th>Type</th>
      <th>Description</th>
      <th>Commentaire / valeur</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><em>Entête EDXL-DE</em></td>
      <td>distributionID</td>
      <td>string</td>
      <td>Identifiant unique du message attribué par l’expéditeur</td>
      <td>Format <code class="language-plaintext highlighter-rouge">&lt;senderId&gt;_&lt;internalId&gt;</code> où <code class="language-plaintext highlighter-rouge">&lt;internalId&gt;</code> est un identifiant garanti unique</td>
    </tr>
    <tr>
      <td><em>Entête EDXL-DE</em></td>
      <td>senderID</td>
      <td>string</td>
      <td>Identifiant de l'émetteur</td>
      <td>À définir. Ex : PTFSAS</td>
    </tr>
    <tr>
      <td><em>Entête EDXL-DE</em></td>
      <td>dateTimeSent</td>
      <td>Date time</td>
      <td>Date et heure d'envoi du message</td>
      <td>Ex : 2025-08-24T14:15:22+02:00</td>
    </tr>
    <tr>
      <td><em>Entête EDXL-DE</em></td>
      <td>dateTimeExpires</td>
      <td>Date time</td>
      <td>Date et heure d'expiration du message : les données ne doivent pas être délivrées au-delà de cette date</td>
      <td>Ex : 2025-08-24T14:15:22+02:00</td>
    </tr>
    <tr>
      <td><em>Entête EDXL-DE</em></td>
      <td>distributionStatus</td>
      <td>string</td>
      <td>Statut du message</td>
      <td>Valeur fixe : <code class="language-plaintext highlighter-rouge">Actual</code></td>
    </tr>
    <tr>
      <td><em>Entête EDXL-DE</em></td>
      <td>distributionKind</td>
      <td>string</td>
      <td>Type du message</td>
      <td>Valeur fixe : <code class="language-plaintext highlighter-rouge">Report</code></td>
    </tr>
    <tr>
      <td><em>Entête EDXL-DE</em></td>
      <td>descriptor.language</td>
      <td>string</td>
      <td>Langue du message échangé</td>
      <td>Valeur fixe : <code class="language-plaintext highlighter-rouge">fr-FR</code></td>
    </tr>
    <tr>
      <td><em>Entête EDXL-DE</em></td>
      <td>descriptor.explicitAddress.explicitAddressScheme</td>
      <td>string</td>
      <td>Identifiant du SI pilotant le Hub</td>
      <td>Valeur fixe : <code class="language-plaintext highlighter-rouge">Hubex</code></td>
    </tr>
    <tr>
      <td><em>Entête EDXL-DE</em></td>
      <td>descriptor.explicitAddress.explicitAddressValue</td>
      <td>string</td>
      <td>Identifiant du SAMU destinataire</td>
      <td>fr.health.samuXXX Ex : fr.health.samu330</td>
    </tr>
    <tr>
      <td><em>Contenu</em></td>
      <td>content.contentObject.JsonContent.embeddedJsonContent</td>
      <td>json</td>
      <td>Contenu du message json encapsulé dans l'entête</td>
      <td>Fichier Bundle transactionnel au format JSON</td>
    </tr>
  </tbody>
</table>

<h4 id="acquittement-technique">Acquittement technique</h4>

<p>Un acquittement technique sera transmis du Hub vers la plateforme SAS afin d'informer cette dernière de la bonne prise en charge du message et de l'inscription dans sa file d'envoi (file « message » du LRM). Cette fonctionnalité est intégréé au protocole AMQ sous la forme de <em>Consumer Acknowledgement</em>, cf. spécifications du Hub Santé.</p>

<h4 id="message-dacquittement-final">Message d'acquittement final</h4>

<p>Cet aquittement correspond à la confirmation par le HubSanté de la bonne réception du message transmis par la plateforme SAS. L'entête est de type "RC-DE", cf. spécifications du Hub Santé.</p>

<table>
  <thead>
    <tr>
      <th>Élément</th>
      <th>Champ</th>
      <th>Type</th>
      <th>Description</th>
      <th>Commentaire / valeur</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><em>Entête RC-DE</em></td>
      <td>messageId</td>
      <td>string</td>
      <td>Identifiant du message interne. Identique au champ <code class="language-plaintext highlighter-rouge">distributionID</code> de l'enveloppe EDXL-DE</td>
      <td>Égal à <code class="language-plaintext highlighter-rouge">distributionId</code> du message initial</td>
    </tr>
    <tr>
      <td><em>Entête RC-DE</em></td>
      <td>sender.AddresseeType.name</td>
      <td>string</td>
      <td>Identifiant de l'émetteur</td>
      <td>fr.health.samuXXX Ex : fr.health.samu330</td>
    </tr>
    <tr>
      <td><em>Entête RC-DE</em></td>
      <td>sender.AddresseeType.URL</td>
      <td>string</td>
      <td>URL de l'émetteur</td>
      <td>hubex:fr.fr.health.samuXXX</td>
    </tr>
    <tr>
      <td><em>Entête RC-DE</em></td>
      <td>sentAt</td>
      <td>Date time</td>
      <td>Date et heure d'envoi du message</td>
      <td>Ex : 2025-08-24T14:15:22+02:00</td>
    </tr>
    <tr>
      <td><em>Entête RC-DE</em></td>
      <td>status</td>
      <td>string</td>
      <td>Statut du message</td>
      <td>Valeur fixe : <code class="language-plaintext highlighter-rouge">Actual</code></td>
    </tr>
    <tr>
      <td><em>Entête RC-DE</em></td>
      <td>kind</td>
      <td>string</td>
      <td>Type du message</td>
      <td>Valeur fixe : <code class="language-plaintext highlighter-rouge">Ack</code></td>
    </tr>
    <tr>
      <td><em>Entête RC-DE</em></td>
      <td>recipients.recipient.explicitAddressScheme</td>
      <td>string</td>
      <td>Identifiant du SI pilotant le Hub</td>
      <td>Valeur fixe : <code class="language-plaintext highlighter-rouge">Hubex</code></td>
    </tr>
    <tr>
      <td><em>Entête RC-DE</em></td>
      <td>recipients.recipient.explicitAddressValue</td>
      <td>string</td>
      <td>Identifiant du destinataire</td>
      <td>À définir. Ex : PTFSAS</td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td>reference</td>
      <td>string</td>
      <td>Identifiant du message référencé</td>
      <td>Égal à distributionId du message initial</td>
    </tr>
  </tbody>
</table>

<h4 id="message-derreur">Message d'erreur</h4>

<p>En cas d'erreur, un message est posté sur la file « info » de la plateforme SAS. Les champs ci-dessous correspondent à l’en-tête du message</p>

<table>
  <thead>
    <tr>
      <th>Élément</th>
      <th>Champ</th>
      <th>Type</th>
      <th>Description</th>
      <th>Commentaire / valeur</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><em>Entête EDXL-DE</em></td>
      <td>distributionID</td>
      <td>string</td>
      <td>Identifiant unique du message attribué par l’expéditeur</td>
      <td>À définir</td>
    </tr>
    <tr>
      <td><em>Entête EDXL-DE</em></td>
      <td>senderID</td>
      <td>string</td>
      <td>Identifiant de l'émetteur</td>
      <td>fr.health.samu.XXX Ex : fr.health.samu.330</td>
    </tr>
    <tr>
      <td><em>Entête EDXL-DE</em></td>
      <td>dateTimeSent</td>
      <td>Date time</td>
      <td>Date et heure d'envoi du message</td>
      <td>Ex : 2025-08-24T14:15:22+02:00</td>
    </tr>
    <tr>
      <td><em>Entête EDXL-DE</em></td>
      <td>dateTimeExpires</td>
      <td>Date time</td>
      <td>Date et heure d'expiration du message : les données ne doivent pas être délivrées au-delà de cette date</td>
      <td>Ex : 2025-08-24T14:15:22+02:00</td>
    </tr>
    <tr>
      <td><em>Entête EDXL-DE</em></td>
      <td>distributionStatus</td>
      <td>string</td>
      <td>Statut du message</td>
      <td>Valeur fixe : <code class="language-plaintext highlighter-rouge">Actual</code></td>
    </tr>
    <tr>
      <td><em>Entête EDXL-DE</em></td>
      <td>distributionKind</td>
      <td>string</td>
      <td>Type du message</td>
      <td>Valeur fixe : <code class="language-plaintext highlighter-rouge">Error</code></td>
    </tr>
    <tr>
      <td><em>Entête EDXL-DE</em></td>
      <td>descriptor.language</td>
      <td>string</td>
      <td>Langue du message échangé</td>
      <td>Valeur fixe : <code class="language-plaintext highlighter-rouge">fr-FR</code></td>
    </tr>
    <tr>
      <td><em>Entête EDXL-DE</em></td>
      <td>descriptor.explicitAddress.explicitAddressScheme</td>
      <td>string</td>
      <td>Identifiant du SI pilotant le Hub</td>
      <td>Valeur fixe : <code class="language-plaintext highlighter-rouge">Hubex</code></td>
    </tr>
    <tr>
      <td><em>Entête EDXL-DE</em></td>
      <td>descriptor.explicitAddress.explicitAddressValue</td>
      <td>string</td>
      <td>Identifiant du SAMU destinataire</td>
      <td>À définir. Ex : PTFSAS</td>
    </tr>
    <tr>
      <td><em>Contenu</em></td>
      <td>content.contentObject.embeddedJsonContent</td>
      <td>json</td>
      <td>Contenu du message json encapsulé dans l'entête</td>
      <td>JSON avec errorCode et errorCause</td>
    </tr>
  </tbody>
</table>

<p>L'erreur sera présente dans le contenu du message json qui respecte le modèle suivant, cf. spécifications du Hub Santé :</p>

<table>
  <thead>
    <tr>
      <th>Champ</th>
      <th>Description</th>
      <th>Commentaire / valeur</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>errorCode</td>
      <td>Code de l'erreur ayant conduit au rejet du message</td>
      <td>Cf. tableau des erreurs ci-après</td>
    </tr>
    <tr>
      <td>errorCause</td>
      <td>Cause de l'erreur</td>
      <td>La cause de l’erreur. Le distributionID de l’enveloppe EDXL y est précisé si le message a pu être désérialisé, ainsi que des éléments plus précis suivant l’erreur relevée.</td>
    </tr>
    <tr>
      <td>sourceMessage</td>
      <td>Contenu du message rejeté</td>
      <td>A préciser</td>
    </tr>
  </tbody>
</table>

<p>A noter qu'il existe deux types d'erreur :</p>
<ul>
  <li>les messages "techniques" directement générés par le Hub et traduisant une impossibilité de remettre le message au destinataire (LRM) (a)</li>
  <li>les messages d'erreurs "fonctionnels" envoyés depuis le LRM (toujours en transitant par le Hub) traduisant l'impossibilité de traiter correctement le message reçu (b)</li>
</ul>

<p>A titre d'exemple, les codes d'erreur suivants pourront être envoyés du Hub vers la plateforme SAS :</p>
<ul>
  <li>400 (EXPIRED_MESSAGE_BEFORE_ROUTING) - Le message n’a pas été reçu par son destinataire, il a expiré sur le Hub avant de lui être délivré.</li>
  <li>500 (DEAD_LETTERED_QUEUE) Le message n’a pas été reçu par son destinataire, il a expiré avant qu’il ne le dépile.</li>
</ul>

<p>Le LRM pourra envoyer des messages de type :</p>
<ul>
  <li>404 (NOT_FOUND) - L'identifiant du RDV a mettre à jour n'a pas été trouvé dans le cas d'un Bundle contenant une mise à jour sur la ressource Appointment.</li>
</ul>

<h3 id="message-denvoi-de-rdv">Message d'envoi de RDV</h3>

<p>Lorsqu’un régulateur prend RDV pour un patient via la plateforme numérique SAS, celle-ci transmet un message de création de RDV qui suivra les modalités suivantes :</p>

<ul>
  <li><strong>Protocole</strong> : <span style="color:blue">AMQP 0-9-1<br/>
</span></li>
  <li><strong>Ressource type</strong> : <span style="color:blue">Bundle<br/>
</span></li>
  <li><strong>Sender</strong> : <span style="color:blue">PTF SAS<br/>
</span></li>
  <li><strong>Content-type</strong> : <span style="color:blue">application/json  <br/>
</span></li>
  <li><strong>Format du contenu</strong> : <span style="color:blue">JSON
</span></li>
</ul>

<h3 id="message-de-modification-de-rdv">Message de modification de RDV</h3>

<p>La mise à jour des données du RDV peut porter sur chacun des éléments de la ressource transmise (dates du créneau, PS effecteurs des soins, statut du RDV, etc.).</p>

<p>Le message transmis pour la mise à jour du RDV devra suivre les modalités suivantes :</p>

<ul>
  <li><strong>Protocole</strong> : <span style="color:blue">AMQP 0-9-1<br/>
</span></li>
  <li><strong>Ressource type</strong> : <span style="color:blue">Bundle<br/>
</span></li>
  <li><strong>Sender</strong> : <span style="color:blue">PTF SAS<br/>
</span></li>
  <li><strong>Content-type</strong> : <span style="color:blue">application/json  <br/>
</span></li>
  <li><strong>Format du contenu</strong> : <span style="color:blue">JSON
</span></li>
</ul>

<p>Le fichier json encapsulé dans le message est un Bundle de type transaction et ne contiendra que les ressources créées ou modifiées par rapport au message de création transmis.</p>

<p>Ceci se fait au travers du verbe HTTP (POST et/ou PUT) de l'attribut entry.request.method de la ressource Bundle.</p>

<p>Cf. <a href="./Bundle-ExampleBundleAppointmentLRM5.json.html">exemple</a> avec modification de la ressource <code class="language-plaintext highlighter-rouge">Appointment</code> et ajout de la ressource <code class="language-plaintext highlighter-rouge">Practitioner</code></p>

<h3 id="message-dannulation-de-rdv">Message d'annulation de RDV</h3>

<p>Il n’y aura pas de message spécifique pour l’annulation d’un RDV. Une annulation de RDV est modélisée par un message de type « mise à jour du RDV » avec la modification du statut du RDV à « annulé ».</p>

<p>Cf. <a href="./Bundle-ExampleBundleAppointmentLRM9.json.html">exemple</a> de RDV annulé avec modification de la ressource <code class="language-plaintext highlighter-rouge">Appointment</code></p>

<h3 id="nomenclatures">Nomenclatures</h3>

<p>Cette section détaille les nomenclatures à utiliser afin de renseigner les différents éléments codifiés de la requête.</p>
<ul>
  <li><strong>Méthode d’ajout de la ressource associée</strong> : Pour chaque ressource à ajouter ou modifier, ces champs permettent d’indiquer la méthode HTTP à appliquer (POST, PUT) et l’url de la ressource équivalente :
    <ul>
      <li>Entry.request.method est valorisé à « POST » pour indiquer une nouvelle ressource à créer pour le RDV transmis ou « PUT » pour une ressource transmise initialement et concernant une mise à jour d’un ou plusieurs champs au sein de celle-ci.</li>
      <li>Entry.request.url indique la ressource associée à créer ou mettre à jour</li>
    </ul>
  </li>
  <li>
    <p><strong>Identifiant technique du RDV</strong> : Un identifiant technique unique par RDV est transmis. Cet ID est défini par la plateforme numérique SAS et peut prendre la forme d’un UUID par exemple. La solution éditeur devra s’appuyer sur cet ID pour la gestion des requêtes de mises à jour.</p>
  </li>
  <li>
    <p><a name="l1626">​</a><strong>URL de l’extension et catégorie de l’orientation SAS</strong> : Le <a href="./ValueSet/categorie-orientation-sas-valueset">jeu de valeur de la catégorie de l’orientation SAS est utilisé</a> à travers l’extension pour indiquer la catégorie de l’orientation de RDV SAS transmise.</p>
  </li>
  <li><strong>Statut du RDV</strong> : L’utilisation de la nomenclature standard AppointmentStatus (http://hl7.org/fhir/appointmentstatus) est attendue. La plateforme numérique SAS exploite à date les valeurs suivantes :
    <ul>
      <li>PENDING : RDV en attente de confirmation</li>
      <li>BOOKED : RDV pris et confirmé</li>
      <li>FULFILLED : RDV honoré</li>
      <li>NOSHOW : RDV non honoré</li>
      <li>CANCELLED : RDV annulé</li>
    </ul>
  </li>
  <li><strong>Rôle du PS effecteur de soins</strong> : L’utilisation de la nomenclature standard ParticipationType (http://terminology.hl7.org/CodeSystem/v3-ParticipationType) est attendue. Dans le cadre des échanges avec les solutions éditeurs de LRM, ce champ est valorisé à :
    <ul>
      <li>ADM : admitter</li>
    </ul>
  </li>
  <li><strong>Statut d’acceptation du RDV par le PS effecteur de soins</strong> : La nomenclature standard Appointmentparticipantstatus (http://hl7.org/fhir/ValueSet/participationstatus) est utilisée. La plateforme numérique SAS exploite à date les valeurs suivantes :
    <ul>
      <li>ACCEPTED : RDV accepté par le PS effecteur de soins</li>
      <li>NEEDS-ACTION : RDV en attente de confirmation par le PS effecteur de soins (pour le statut du RDV « PENDING » uniquement)</li>
    </ul>
  </li>
  <li><strong>Identification du PS effecteur de soins</strong> : Les champs sont valorisés comme suit :
    <ul>
      <li>identifier.value (valeur de l’identifiant) : RPPS avec préfixe « 8 »</li>
      <li>identifier.system (autorité d’affectation) : urn:oid:1.2.250.1.71.4.2.1</li>
      <li>identifier.type (type d’identifiant) : le champ type.coding.code est valorisé à « IDNPS » et type.coding.system à « https://hl7.fr/ig/fhir/core/CodeSystem/fr-core-cs-v2-0203 »</li>
    </ul>
  </li>
  <li><strong>URL de l’extension et spécialité du PS effecteur de soins</strong> : La nomenclature des spécialités ordinales du MOS (https://mos.esante.gouv.fr/NOS/TRE_R38-SpecialiteOrdinale/FHIR/TRE-R38-SpecialiteOrdinale/) est référencée et utilisée. La plateforme numérique SAS transmettra les champs avec la valorisation suivante pour indiquer la compétence ou spécialité de l’effecteur de soins :
    <ul>
      <li>Extension.url (extension pour valeur de la spécialité) : https://hl7.fr/ig/fhir/core/StructureDefinition/fr-core-practitioner-specialty</li>
      <li>ValueCoding.system (nomenclature) : https://mos.esante.gouv.fr/NOS/TRE_R38-SpecialiteOrdinale/FHIR/TRE-R38-SpecialiteOrdinale</li>
      <li>Valuecoding.code (valeur du code) : code de la nomenclature de la spécialité du PS (ex. valorisé à « SM54 » pour Médecine générale)</li>
    </ul>
  </li>
  <li><strong>Identification de la structure de soins</strong> : Identifiant unique propre à chaque structure de soins. Les champs sont valorisés comme suit :
    <ul>
      <li>identifier.value (valeur de l'identifiant) : numéro du FINESS avec préfixe « 1 » ou numéro du SIRET avec préfixe « 3 »</li>
      <li>identifier.system (autorité d’affectation) : urn:oid:1.2.250.1.71.4.2.2</li>
      <li>identifier.type (type d’identifiant) : le champ type.coding.code est valorisé à « IDNST » et type.coding.system à « https://hl7.fr/ig/fhir/core/CodeSystem/fr-core-cs-v2-0203 »</li>
    </ul>
  </li>
  <li><strong>Référence à la ressource Practitioner et/ou Organization associée</strong> : Lorsque le PS effecteur de soins de l’orientation transmise est connu, une référence à Practitioner est valorisée. Lorsque la structure de soins associée au RDV transmis est connue, une référence à Organization est valorisée. Ces références sont valorisées comme suit :
    <ul>
      <li>Practitioner.reference : Practitioner/<référence à="null" Practitioner="null" la="null" ressource="null" associée="null"></référence></li>
      <li>Organization.reference : Organization/<référence à="null" Organization="null" la="null" ressource="null" associée="null"></référence></li>
    </ul>
  </li>
</ul>

<h3 id="déclencheurs-et-règles-dintégration-attendues">Déclencheurs et règles d'intégration attendues</h3>

<p>Divers évènements dans la plateforme numérique SAS peuvent déclencher de manière instantanée le flux. À titre d’exemple, vous trouverez ci-dessous une liste non exhaustive de ces évènements :</p>

<ul>
  <li>Pour la création d’un message :
    <ul>
      <li>lors de la prise de RDV ou demande de prise en charge par le régulateur pour le compte du patient dans une solution éditeur</li>
      <li>lors de la prise de RDV par le régulateur pour le compte du patient dans la plateforme numérique SAS</li>
      <li>lors de la prise de RDV par le régulateur pour le compte du patient en surnuméraire</li>
    </ul>
  </li>
  <li>Pour la modification d’un message :
    <ul>
      <li>lors d’un changement de statut du RDV : confirmé, annulé, honoré et non honoré</li>
      <li>lors d’un changement du PS effecteur de soins (ex. remplacement) ou lorsque le PS n’a pas pu être identifié au préalable (ex. agendas de structure)</li>
      <li>lors d’un changement horaire du créneau</li>
    </ul>
  </li>
</ul>

<p><br/></p>

<p>Le paragraphe ci-dessous détaille les différentes <strong>règles de gestions attendues</strong> par les éditeurs à la suite du déclenchement du flux et la transmission d’un message :</p>
<ul>
  <li>A la réception du message, <strong>la solution éditeur stockera l’identifiant technique SAS du RDV transmis</strong> pour référence et gestion des mises à jour éventuelles</li>
  <li>Il est attendu pour les éditeurs ayant implémenté le flux de <strong>mettre en place une écoute de leurs files de messages instantanément</strong> afin de permettra le rattachement du RDV avec le DRM par le régulateur à la suite de la transmission des informations de RDV</li>
  <li>Lorsque les données du RDV pris pour le compte du patient auront été transmises à la solution LRM, le régulateur OSNP devra réaliser le rapprochement entre l’orientation et le DRM. Il est attendu que <strong>l’éditeur mette en place un tableau de bord ou un espace pour la gestion des RDV pris au sein du LRM</strong> en s’appuyant sur la donnée métier disponible (ex. via numéro téléphone, Nom Patient, sélection ID DRM avec filtre SNP, heure de prise de RDV, heure du RDV, etc) ou par l’affichage d’une liste déroulante des orientations non associées depuis le DRM. L’ANS et l’éditeur conviendront en atelier de cadrage du moyen d’association à définir dans la solution.</li>
  <li>Les règles d’association de l’orientation avec le DRM et la gestion des requêtes potentielles non associées seront gérées au cas par cas avec l’éditeur.</li>
  <li>Il est attendu de la part de l’éditeur de <strong>conserver un historique des messages reçus</strong> au niveau de l’échange et au niveau du résultat du traitement du message.</li>
</ul>



</div>
        </div>    <!-- /inner-wrapper -->
      </div>    <!-- /row -->
    </div>    <!-- /container -->
  </div>    <!-- /segment-content -->

  <script src="assets/js/jquery.js" type="text/javascript"> </script>       <!-- note keep space here, otherwise it will be transformed to empty tag -> fails -->
  <script src="assets/js/jquery-ui.min.js" type="text/javascript"> </script>

<script src="assets/js/window-hash.js" type="text/javascript"> </script>
  <a name="bottom"> </a>
  <div igtool="footer" id="segment-footer" class="segment">    <!-- segment-footer -->
    <div class="container">    <!-- container -->

      <div style="background-color:var(--footer-nav-bg-color)">
        <table style="width:100%">
          <tbody>
            <tr>
              <td style="text-align:left">&nbsp;

                <a href="specifications_techniques-sos-gestion_rdv.html">&lt;prev</a>

              </td>
              <td style="text-align:center">
                <a href="#top">top</a>
              </td>
              <td style="text-align:right">&nbsp;

                <a href="ressources_casusage.html">next&gt;</a>

              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="inner-wrapper">
        <p>
          IG &copy; 2020+ <a style="color:var(--footer-hyperlink-text-color)" href="https://esante.gouv.fr">ANS</a>.  Package ans.fhir.fr.sas#1.1.0 based on <a style="color: var(--footer-hyperlink-text-color)" href="http://hl7.org/fhir/R4/">FHIR 4.0.1</a>. Generated <span title="Thu, Sep 11, 2025 12:09+0000">2025-09-11</span>
          <br/>
          <span style="color: var(--footer-highlight-text-color)"></span>
            Liens : <a style="color: var(--footer-hyperlink-text-color)" href="toc.html">Table des matières</a> |
<a style="color: var(--footer-hyperlink-text-color)" href="qa.html">QA</a> |
<a style="color: var(--footer-hyperlink-text-color)" href="https://interop.esante.gouv.fr/ig/fhir/sas/history.html" target="_blank">Historique des versions</a>
<a style="color: var(--footer-hyperlink-text-color)" href="https://interop.esante.gouv.fr/ig/documentation" target="_blank">Documentation</a>
 | <a style="color: var(--footer-hyperlink-text-color)" href="https://github.com/ansforge/IG-fhir-service-acces-aux-soins/issues/new" target="_blank">New Issue</a>

          
        </p>
      </div>    <!-- /inner-wrapper -->
    </div>    <!-- /container -->
  </div>    <!-- /segment-footer -->
  
  <div id="segment-post-footer" class="segment hidden">    <!-- segment-post-footer -->
    <div class="container">    <!-- container -->
    </div>    <!-- /container -->
  </div>    <!-- /segment-post-footer -->
  
    <!-- JS and analytics only. -->
    <!-- Bootstrap core JavaScript
  ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
  <script src="assets/js/bootstrap.min.js" type="text/javascript"> </script>
  <script src="assets/js/respond.min.js" type="text/javascript"> </script>
  <script src="assets/js/anchor.min.js" type="text/javascript"> </script>
  <script src="assets/js/clipboard.min.js" type="text/javascript"> </script>
  <script src="assets/js/clipboard-btn.js" type="text/javascript"> </script>

    <!-- Ajout ANS -->
  <script src="assets/js/app.js" type="text/javascript"> </script>
  <script src="assets/js/vendor.js" type="text/javascript"> </script>
    <!-- Fin ajout ANS -->

  <script src="assets/js/anchor-hover.js" type="text/javascript"> </script>
  

    <!-- Analytics Below
  ================================================== -->


    <!-- AJOUT ANS -->

<footer role="contentinfo" class="footer footer-principal">
  <div class="footer__region1">
    <div class="container">
      <div class="row">

        <div class="col-md-6 col-lg-4 text-center text-md-left">
          <div class="logos">        
            <div class="logo logo--0">
              <a rel="nofollow" href="https://solidarites-sante.gouv.fr" title="Ministère des Solidarités et de la Santé (nouvelle fenêtre)" target="_blank">
                
                <img src="assets/images/logo-ministere.svg" alt="Ministère des Solidarités et de la Santé" width="133" loading="lazy" height="77"/>
                
              </a>
            </div>
        
            <div class="logo logo--1">
              <a rel="nofollow" href="https://esante.gouv.fr/" title="Agence du numérique en santé (nouvelle fenêtre)" target="_blank">
                
                <img src="assets/images/logo-ANS-footer.svg" alt="Agence du numérique en santé" width="106" loading="lazy" height="74"/>
              </a>
            </div>
          </div>
        </div>
        
        <div class="col-md-6 col-lg-4 text-center text-md-left">
          <p class="footer__title">Agence du Numérique en Santé</p>
          <p>2-10 Rue d'Oradour-sur-Glane 75015 Paris</p>

            <!-- <div class="m-social">
            <ul class="m-social__list">        
              <li class="m-social__item">
                <a class="m-social__link" href="https://www.linkedin.com/company/agence-du-numerique-en-sante/" target="_blank" rel="nofollow">
                  <div class="m-social__icon">
                    <svg class="svg-icon svg-linkedin" aria-hidden="true" focusable="false"><use href="assets/images/icon-sprite.svg#linkedin"></use></svg>
                  </div>
                  <span class="sr-only">linkedin</span>
                </a>
              </li>
              <li class="m-social__item">
                <a class="m-social__link" href="https://twitter.com/esante_gouv_fr" target="_blank" rel="nofollow">
                  <div class="m-social__icon">
                    <svg class="svg-icon svg-twitter" aria-hidden="true" focusable="false"><use href="assets/images/icon-sprite.svg#twitter"></use></svg>
                  </div>
                  <span class="sr-only">twitter</span>
                </a>
              </li>
              <li class="m-social__item">
                <a class="m-social__link" href="https://www.youtube.com/channel/UCd1zuSaU5cE1lRCpwv_HSMA" target="_blank" rel="nofollow">
                  <div class="m-social__icon">
                    <svg class="svg-icon svg-youtube" aria-hidden="true" focusable="false"><use href="assets/images/icon-sprite.svg#youtube"></use></svg>
                  </div>
                  <span class="sr-only">youtube</span>
                </a>
              </li>
              <li class="m-social__item">
                <a class="m-social__link" href="https://esante.gouv.fr/rss.xml" target="_blank" rel="nofollow">
                  <div class="m-social__icon">
                    <svg class="svg-icon svg-rss" aria-hidden="true" focusable="false"><use href="assets/images/icon-sprite.svg#rss"></use></svg>
                  </div>
                  <span class="sr-only">rss</span>
                </a>
              </li>
            </ul>
          </div> -->
        </div>
        
        <div class="col-6 col-lg-4">
          <ul class="footer-list">
            <li class="footer-list__item footer-list__item--hasIcon">
              <a href="mailto:ci-sis@esante.gouv.fr" class="mailto-link">
                <svg aria-hidden="true" focusable="false" class="svg-icon svg-angle-right"><use href="assets/images/icon-sprite.svg#angle-right"></use></svg>Contact</a>
              </li>
                <!-- <li class="footer-list__item">
                <a href="https://interop-pprod.esante.gouv.fr/ci-sis-specifications/wp-content/uploads/CGU_espace_de_tests_v1.1.pdf" class="file-link">Mentions légales</a>
              </li> -->
            </ul>
          </div>

        </div>
      </div>
    </div>
    
      <!-- <div class="footer__region2">
      <div class="container">
        <div class="footer-contentinfo">
          <ul class="footer-list footer-list--inline">

          </ul>
        </div>
      </div>
    </div> -->
  </footer>
  </body>
</html>